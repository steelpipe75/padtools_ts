class e extends Error{constructor(e){super(e),this.name=this.constructor.name}}class t extends e{constructor(){super("このコマンドは引数が必要です")}}class o extends e{constructor(){super("このコマンドに引数は不要です")}}class n extends e{constructor(){super("インデントの数が不正です")}}class i extends e{constructor(){super("未知のコマンドです")}}class l extends e{constructor(){super("不適切なelseです")}}class r extends e{constructor(){super("不適切なcaseが現れました")}}class d extends e{constructor(){super("既に同名のCaseが存在します")}}class s extends e{constructor(e){super(`\u{5185}\u{90E8}\u{30A8}\u{30E9}\u{30FC}:${e}`)}}class a{constructor(){this.parent=null,this.depth=0,this.nodeList=[],this.optionStatus="Default",this.optionArg=null}}let u=/^\s*(#.*)?$/,h=()=>!1,c=(e,n)=>{if(e.nodeList.length>0){let t=e.nodeList[e.nodeList.length-1];null!=e.optionArg&&"switch"===t.type&&(t.cases.set(e.optionArg,null),e.optionArg=null)}if(n.startsWith(":")){let s=n.split(/[ \t]+/),a=s[0].substring(1),u=s.length>1?n.substring(s[0].length).trim():null;switch(a){case"call":if(!u)throw new t;e.nodeList.push({type:"call",text:u,childNode:null}),e.optionStatus="Default",e.optionArg=null;break;case"terminal":if(!u)throw new t;e.nodeList.push({type:"terminal",text:u}),e.optionStatus="Default",e.optionArg=null;break;case"comment":if(!u)throw new t;e.nodeList.push({type:"comment",text:u}),e.optionStatus="Default",e.optionArg=null;break;case"while":if(!u)throw new t;e.nodeList.push({type:"loop",isWhile:!0,text:u,childNode:null}),e.optionStatus="Default",e.optionArg=null;break;case"dowhile":if(!u)throw new t;e.nodeList.push({type:"loop",isWhile:!1,text:u,childNode:null}),e.optionStatus="Default",e.optionArg=null;break;case"if":if(!u)throw new t;e.nodeList.push({type:"if",text:u,trueNode:null,falseNode:null}),e.optionStatus="Default",e.optionArg=null;break;case"switch":if(!u)throw new t;e.nodeList.push({type:"switch",text:u,cases:new Map}),e.optionStatus="Default",e.optionArg=null;break;case"else":{let t=0===e.nodeList.length?null:e.nodeList[e.nodeList.length-1];if(null===t||"if"!==t.type)throw new l;if(null!==u)throw new o;e.optionStatus="Else",e.optionArg=null;break}case"case":{let o=0===e.nodeList.length?null:e.nodeList[e.nodeList.length-1];if(null===o||"switch"!==o.type)throw new r;if(!u)throw new t;if(o.cases.has(u))throw new d;e.optionStatus="Default",e.optionArg=u;break}default:throw new i}}else e.nodeList.push({type:"process",text:n,childNode:null}),e.optionStatus="Default",e.optionArg=null},p=e=>{if(null===e)return null;if(e.nodeList.length>0){let t=e.nodeList[e.nodeList.length-1];null!=e.optionArg&&"switch"===t.type&&(t.cases.set(e.optionArg,null),e.optionArg=null)}if(null===e.parent)return null;let t=null;if(0===e.nodeList.length)return e.parent;if(1===e.nodeList.length)t=e.nodeList[0];else{let o={type:"nodeList",children:[]};for(let t=0;t<e.nodeList.length;t++)o.children.push(e.nodeList[t]);t=o}let o=e.parent.nodeList[e.parent.nodeList.length-1];switch(o.type){case"process":case"loop":case"call":o.childNode=t;break;case"switch":if(null!==e.parent.optionArg)o.cases.set(e.parent.optionArg,t);else throw new s("optionArg is null when it shouldn't be for switch node.");break;case"if":if("Default"===e.parent.optionStatus)o.trueNode=t;else if("Else"===e.parent.optionStatus)if(null!==o.falseNode)throw new l;else o.falseNode=t}return e.parent.optionStatus="Default",e.parent.optionArg=null,e.parent};var g={},f={};function F(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}g=f,f.eastAsianWidth=function(e){var t=e.charCodeAt(0),o=2===e.length?e.charCodeAt(1):0,n=t;return(55296<=t&&t<=56319&&56320<=o&&o<=57343&&(t&=1023,o&=1023,n=(t<<10|o)+65536),12288===n||65281<=n&&n<=65376||65504<=n&&n<=65510)?"F":8361===n||65377<=n&&n<=65470||65474<=n&&n<=65479||65482<=n&&n<=65487||65490<=n&&n<=65495||65498<=n&&n<=65500||65512<=n&&n<=65518?"H":4352<=n&&n<=4447||4515<=n&&n<=4519||4602<=n&&n<=4607||9001<=n&&n<=9002||11904<=n&&n<=11929||11931<=n&&n<=12019||12032<=n&&n<=12245||12272<=n&&n<=12283||12289<=n&&n<=12350||12353<=n&&n<=12438||12441<=n&&n<=12543||12549<=n&&n<=12589||12593<=n&&n<=12686||12688<=n&&n<=12730||12736<=n&&n<=12771||12784<=n&&n<=12830||12832<=n&&n<=12871||12880<=n&&n<=13054||13056<=n&&n<=19903||19968<=n&&n<=42124||42128<=n&&n<=42182||43360<=n&&n<=43388||44032<=n&&n<=55203||55216<=n&&n<=55238||55243<=n&&n<=55291||63744<=n&&n<=64255||65040<=n&&n<=65049||65072<=n&&n<=65106||65108<=n&&n<=65126||65128<=n&&n<=65131||110592<=n&&n<=110593||127488<=n&&n<=127490||127504<=n&&n<=127546||127552<=n&&n<=127560||127568<=n&&n<=127569||131072<=n&&n<=194367||177984<=n&&n<=196605||196608<=n&&n<=262141?"W":32<=n&&n<=126||162<=n&&n<=163||165<=n&&n<=166||172===n||175===n||10214<=n&&n<=10221||10629<=n&&n<=10630?"Na":161===n||164===n||167<=n&&n<=168||170===n||173<=n&&n<=174||176<=n&&n<=180||182<=n&&n<=186||188<=n&&n<=191||198===n||208===n||215<=n&&n<=216||222<=n&&n<=225||230===n||232<=n&&n<=234||236<=n&&n<=237||240===n||242<=n&&n<=243||247<=n&&n<=250||252===n||254===n||257===n||273===n||275===n||283===n||294<=n&&n<=295||299===n||305<=n&&n<=307||312===n||319<=n&&n<=322||324===n||328<=n&&n<=331||333===n||338<=n&&n<=339||358<=n&&n<=359||363===n||462===n||464===n||466===n||468===n||470===n||472===n||474===n||476===n||593===n||609===n||708===n||711===n||713<=n&&n<=715||717===n||720===n||728<=n&&n<=731||733===n||735===n||768<=n&&n<=879||913<=n&&n<=929||931<=n&&n<=937||945<=n&&n<=961||963<=n&&n<=969||1025===n||1040<=n&&n<=1103||1105===n||8208===n||8211<=n&&n<=8214||8216<=n&&n<=8217||8220<=n&&n<=8221||8224<=n&&n<=8226||8228<=n&&n<=8231||8240===n||8242<=n&&n<=8243||8245===n||8251===n||8254===n||8308===n||8319===n||8321<=n&&n<=8324||8364===n||8451===n||8453===n||8457===n||8467===n||8470===n||8481<=n&&n<=8482||8486===n||8491===n||8531<=n&&n<=8532||8539<=n&&n<=8542||8544<=n&&n<=8555||8560<=n&&n<=8569||8585===n||8592<=n&&n<=8601||8632<=n&&n<=8633||8658===n||8660===n||8679===n||8704===n||8706<=n&&n<=8707||8711<=n&&n<=8712||8715===n||8719===n||8721===n||8725===n||8730===n||8733<=n&&n<=8736||8739===n||8741===n||8743<=n&&n<=8748||8750===n||8756<=n&&n<=8759||8764<=n&&n<=8765||8776===n||8780===n||8786===n||8800<=n&&n<=8801||8804<=n&&n<=8807||8810<=n&&n<=8811||8814<=n&&n<=8815||8834<=n&&n<=8835||8838<=n&&n<=8839||8853===n||8857===n||8869===n||8895===n||8978===n||9312<=n&&n<=9449||9451<=n&&n<=9547||9552<=n&&n<=9587||9600<=n&&n<=9615||9618<=n&&n<=9621||9632<=n&&n<=9633||9635<=n&&n<=9641||9650<=n&&n<=9651||9654<=n&&n<=9655||9660<=n&&n<=9661||9664<=n&&n<=9665||9670<=n&&n<=9672||9675===n||9678<=n&&n<=9681||9698<=n&&n<=9701||9711===n||9733<=n&&n<=9734||9737===n||9742<=n&&n<=9743||9748<=n&&n<=9749||9756===n||9758===n||9792===n||9794===n||9824<=n&&n<=9825||9827<=n&&n<=9829||9831<=n&&n<=9834||9836<=n&&n<=9837||9839===n||9886<=n&&n<=9887||9918<=n&&n<=9919||9924<=n&&n<=9933||9935<=n&&n<=9953||9955===n||9960<=n&&n<=9983||10045===n||10071===n||10102<=n&&n<=10111||11093<=n&&n<=11097||12872<=n&&n<=12879||57344<=n&&n<=63743||65024<=n&&n<=65039||65533===n||127232<=n&&n<=127242||127248<=n&&n<=127277||127280<=n&&n<=127337||127344<=n&&n<=127386||917760<=n&&n<=917999||983040<=n&&n<=1048573||1048576<=n&&n<=1114109?"A":"N"},f.characterLength=function(e){var t=this.eastAsianWidth(e);return"F"===t||"W"===t||"A"===t?2:1},f.length=function(e){for(var t=F(e),o=0,n=0;n<t.length;n++)o+=this.characterLength(t[n]);return o},f.slice=function(e,t,o){var n=f.length(e);t=null==t?0:t,o=void 0===o||null===t?1:o,t<0&&(t=n+t),o<0&&(o=n+o);for(var i="",l=0,r=F(e),d=0;d<r.length;d++){var s=r[d],a=f.length(s);if(l>=t-(2===a))if(l+a<=o)i+=s;else break;l+=a}return i};let x={fontSize:14,fontFamily:"sans-serif",margin:{top:20,right:20,bottom:20,left:20},boxPadding:{top:10,right:10,bottom:10,left:10},branchePadding:{top:5,right:5,bottom:5,left:5},strokeWidth:1,strokeColor:"#000000",backgroundColor:"#ffffff",baseBackgroundColor:null,textColor:"#000000",lineHeight:1.2,doubleLineWidth:5,switchNodeCaseWidth:20,connectorWidth:2,nodeListSpace:10,childNodeOffsetWidth:20,listRenderType:"original"};function w(e,t){switch(e.type){case"process":return n=e,i=t,b({type:"Process",text:n.text,childNode:n.childNode,borderType:"Box",drawLeftBar:!1,drawRightBar:!1},i);case"terminal":return l=e,r=t,b({type:"Terminal",text:l.text,childNode:null,borderType:"WRound",drawLeftBar:!1,drawRightBar:!1},r);case"nodeList":return d=e,"TerminalOffset"===(s=t).listRenderType?function(e,t){let o=0,n=0,i=0,l=0,r=0,d=0,s="",a=[];for(let i of e.children){let e=w(i,t);a.push(e),o=parseFloat((o+e.height).toFixed(1)),n=parseFloat(Math.max(n,e.width).toFixed(1))}let u=a[0];"Terminal"===u.type&&(i=parseFloat((u.width/2).toFixed(1)));let h=a[a.length-1];if("Terminal"===h.type){let e=parseFloat((h.width/2).toFixed(1));e>i?(l=parseFloat((e-i).toFixed(1)),i=e):r=parseFloat((i-e).toFixed(1))}for(let e=0;e<a.length;e++){let n=a[e];if(0===e?s+=v(l,d,n.svg):e===a.length-1?s+=v(r,d,n.svg):s+=v(i,d,n.svg),e<a.length-1){let l=0;s+=B(i,l="Terminal"===n.type?0===e?parseFloat((d+n.height).toFixed(1)):parseFloat((d+n.height/2).toFixed(1)):parseFloat(d.toFixed(1)),i,"Terminal"===a[e+1].type?e+1===a.length-1?parseFloat((d+n.height+t.nodeListSpace).toFixed(1)):parseFloat((d+n.height+t.nodeListSpace+a[e+1].height/2).toFixed(1)):parseFloat((d+n.height+t.nodeListSpace+a[e+1].height).toFixed(1)),t),o=parseFloat((o+t.nodeListSpace).toFixed(1))}d=parseFloat((d+n.height+t.nodeListSpace).toFixed(1))}return{svg:s,width:parseFloat((n+i).toFixed(1)),height:o,type:"NodeList"}}(d,s):function(e,t){let o=0,n=0,i=0,l="",r=[];for(let i of e.children){let e=w(i,t);r.push(e),o=parseFloat((o+e.height).toFixed(1)),n=parseFloat(Math.max(n,e.width).toFixed(1))}for(let e=0;e<r.length;e++){let n=r[e];if(l+=v(0,i,n.svg),e<r.length-1){let d=0;l+=B(0,d="Terminal"===n.type?parseFloat((i+n.height/2).toFixed(1)):parseFloat(i.toFixed(1)),0,"Terminal"===r[e+1].type?parseFloat((i+n.height+t.nodeListSpace+r[e+1].height/2).toFixed(1)):parseFloat((i+n.height+t.nodeListSpace+r[e+1].height).toFixed(1)),t),o=parseFloat((o+t.nodeListSpace).toFixed(1))}i=parseFloat((i+n.height+t.nodeListSpace).toFixed(1))}return{svg:l,width:n,height:o,type:"NodeList"}}(d,s);case"call":return a=e,u=t,b({type:"Call",text:a.text,childNode:a.childNode,borderType:"Box",drawLeftBar:!0,drawRightBar:!0},u);case"loop":return h=e,c=t,b({type:"Loop",text:h.text,childNode:h.childNode,borderType:"Box",drawLeftBar:h.isWhile,drawRightBar:!h.isWhile},c);case"if":let o;return p=e,g=t,o={text:p.text,type:"If",branches:[]},p.trueNode?o.branches.push({label:"",node:p.trueNode}):o.branches.push({label:"",node:null}),p.falseNode?o.branches.push({label:"",node:p.falseNode}):o.branches.push({label:"",node:null}),L(o,g);case"switch":var n,i,l,r,d,s,a,u,h,c,p,g,f,F,x=e,m=t;let y={text:x.text,type:"Switch",branches:[]};for(let[e,t]of x.cases.entries())y.branches.push({label:e.toString(),node:t});return L(y,m);case"comment":return f=e,F=t,b({type:"Comment",text:`(${f.text})`,childNode:null,borderType:"None",drawLeftBar:!1,drawRightBar:!1},F);default:return{svg:"",width:0,height:0,type:"Unknown"}}}function b(e,t){let o=E(e.text,t),n=o.width,i=o.height,l=t.boxPadding.left,r=0,d="";if("Box"===e.borderType){n+=t.boxPadding.left+t.boxPadding.right,i+=t.boxPadding.top+t.boxPadding.bottom,r+=t.boxPadding.top;let e=t.backgroundColor??"none";d+=`<rect x="0" y="0" width="${n.toFixed(1)}" height="${i.toFixed(1)}" `,d+=`stroke="${t.strokeColor}" stroke-width="${t.strokeWidth}" `,d+=`fill="${e}"/>`}else if("WRound"===e.borderType){i+=t.boxPadding.top+t.boxPadding.bottom,r+=t.boxPadding.top;let e=i/2;n+=i,l=e;let o=t.backgroundColor??"none";d+=`<rect x="0" y="0" width="${n.toFixed(1)}" height="${i.toFixed(1)}" `,d+=`rx="${e.toFixed(1)}" ry="${e.toFixed(1)}" `,d+=`stroke="${t.strokeColor}" stroke-width="${t.strokeWidth}" `,d+=`fill="${o}"/>`}else n+=t.boxPadding.left+t.boxPadding.right;e.drawLeftBar&&(d+=B(t.doubleLineWidth,0,t.doubleLineWidth,i,t)),e.drawRightBar&&(d+=B(n-t.doubleLineWidth,0,n-t.doubleLineWidth,i,t)),d+=k(e.text,l,r,t);let s=null;return e.childNode&&(s=w(e.childNode,t),d+=v(t.childNodeOffsetWidth+n,0,s.svg),d+=B(n,0,t.childNodeOffsetWidth+n,0,t)),{svg:d,width:parseFloat((n+(s?s.width+t.childNodeOffsetWidth:0)).toFixed(1)),height:parseFloat(Math.max(i,s?s.height:0).toFixed(1)),type:e.type}}function m(e,t){let o=E(e,t);return{width:o.width+t.branchePadding.left+t.branchePadding.right,height:o.height+t.branchePadding.top+t.branchePadding.bottom}}function y(e,t,o,n){return k(e,t+n.branchePadding.left,o+n.branchePadding.top,n)}function L(e,t){if(e.branches.length<2)for(;e.branches.length<2;)e.branches.push({label:"",node:null});let o="",n=m(e.text,t),i=n.height,l=0,r=0,d=0,s=0,a=0,u=0,h=[],c=new Map;for(let[o,n]of e.branches.entries()){let p,g,f=n.label,F=m(f,t),x=n.node?w(n.node,t):null,b=x?{width:x.width,height:x.height}:{width:0,height:0};s!==e.branches.length-1&&(b.height+=t.nodeListSpace),h.push({label:f,fragment:x}),l<F.width&&(l=F.width),r<b.width&&(r=b.width),0===s?(p=0,g=F.height):s===e.branches.length-1?(p=F.height,g=0):g=p=parseFloat((F.height/2).toFixed(1)),a<p&&(a=parseFloat((a+p-a).toFixed(1)));let y=parseFloat((u>p?2*u:2*p).toFixed(1));u=g,y>a&&(a=y),d=parseFloat((d+a).toFixed(1)),c.set(o,d),(a=g>b.height?g:b.height)<i&&s<e.branches.length-1&&(a=i),s+=1}d=parseFloat((d+a).toFixed(1));let p=!0,g=!1,f=[],F=0,x=parseFloat((0+n.width+l+t.switchNodeCaseWidth).toFixed(1));for(let[e,n]of(f.push({x:0,y:0}),h.entries())){let i=parseFloat((0+(c.get(e)||0)).toFixed(1));null!==n.fragment&&(o+=v(parseFloat((x+t.childNodeOffsetWidth).toFixed(1)),i,n.fragment.svg),o+=B(x,i,parseFloat((x+t.childNodeOffsetWidth).toFixed(1)),i,t),g=!0),p||f.push({x:parseFloat((x-t.switchNodeCaseWidth).toFixed(1)),y:parseFloat(((F+i)/2).toFixed(1))}),f.push({x:x,y:i}),p=!1,F=i}f.push({x:0,y:parseFloat(F.toFixed(1))});let b=f.map(e=>`${e.x.toFixed(1)},${e.y.toFixed(1)}`).join(" "),L=t.backgroundColor??"none";for(let[i,r]of(o+=`<polygon points="${b}" `,o+=`stroke="${t.strokeColor}" `,o+=`stroke-width="${t.strokeWidth}" `,o+=`fill="${L}"/>`,h.entries())){let d=r.label,s=parseFloat((0+(c.get(i)||0)).toFixed(1)),a=m(d,t);i>=e.branches.length-1?s=parseFloat((s-a.height).toFixed(1)):i>0&&(s=parseFloat((s-a.height/2).toFixed(1))),o+=y(d,parseFloat((0+n.width+l-a.width).toFixed(1)),s,t)}return{svg:o+=y(e.text,parseFloat("0.0"),parseFloat((F/2-n.height/2).toFixed(1)),t),width:parseFloat((x+r+(g?t.childNodeOffsetWidth:0)).toFixed(1)),height:parseFloat(d.toFixed(1)),type:e.type}}function E(e,t){let o=e.split("\n"),n=t.fontSize,i=.6*t.fontSize,l=e=>{switch((0,g.eastAsianWidth)(e)){case"F":case"W":return n;default:return i}};return{width:Math.max(...o.map(e=>{let t=0;for(let o of e)t+=l(o);return t})),height:o.length*t.fontSize*t.lineHeight}}function k(e,t,o,n){let i=e.split("\n"),l="";return i.forEach((e,i)=>{let r=0===i?0:i*n.fontSize*n.lineHeight;l+=`<text x="${t.toFixed(1)}" y="${(o+n.fontSize).toFixed(1)}" dy="${r.toFixed(1)}" font-family="${n.fontFamily}" font-size="${n.fontSize}" fill="${n.textColor}">${e}</text>`}),l}function B(e,t,o,n,i){return`<line
      x1="${e.toFixed(1)}" y1="${t.toFixed(1)}"
      x2="${o.toFixed(1)}" y2="${n.toFixed(1)}"
      stroke="${i.strokeColor}"
      stroke-width="${i.strokeWidth}"
    />`}function v(e,t,o){return`<g transform="translate(${e.toFixed(1)}, ${t.toFixed(1)})">${o}</g>`}document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("spdInput"),o=document.getElementById("svgOutput"),i=document.getElementById("fileInput"),l=document.getElementById("downloadButton"),r=document.getElementById("downloadSvgButton"),d=document.getElementById("fontSizeInput"),s=document.getElementById("baseBackgroundColorInput"),g=document.getElementById("transparentBackgroundCheckbox"),f=document.getElementById("backgroundColorInput"),F=document.getElementById("transparentNodeBackgroundCheckbox"),b=document.getElementById("textColorInput"),m=document.getElementById("listRenderTypeTerminalOffset"),y=document.getElementById("applyOptionsButton"),L=()=>{let i=t.value;try{let t=((t,o=h)=>{let i=new a,l=i,r=t.split(/\r?\n/),d=0;try{for(;d<r.length;){let t=r[d];if(d++,u.test(t))continue;let i=0;for(let e=0;e<t.length;++e)if("	"===t.charAt(e))i++;else break;try{if(null===l||i>0&&0===l.nodeList.length||i<0)throw new n;if(i>l.depth){let e=l.nodeList[l.nodeList.length-1];if(i>l.depth+1||e&&"comment"===e.type||"switch"===e.type&&null==l.optionArg)throw new n;let t=new a;t.parent=l,t.depth=l.depth+1,l=t}for(;i<l.depth;)if(l=p(l),null===l)throw new n;let e=t.substring(i);if(e.endsWith("@")){let t=e.substring(0,e.length-1);for(;d<r.length;){let e=r[d];if(d++,u.test(e))continue;let o=0;for(let t=0;t<e.length;++t)if("	"===e.charAt(t))o++;else break;let n=e.substring(o);if(n.endsWith("@"))t+=`
${n.substring(0,n.length-1)}`;else{t+=`
${n}`;break}}e=t}if(e=e.replace(/@/g,"\n"),null!==l)c(l,e);else throw new n}catch(n){if(n instanceof e)if(o(t,d-1,n));else throw n;else throw n}}for(;null!=l;)l=p(l)}catch(t){if(t instanceof e)throw t;throw console.error(`\u{884C} ${d} \u{3067}\u{4E88}\u{671F}\u{3057}\u{306A}\u{3044}\u{30A8}\u{30E9}\u{30FC}\u{304C}\u{767A}\u{751F}\u{3057}\u{307E}\u{3057}\u{305F}: ${t}`),new e(`\u{4E88}\u{671F}\u{3057}\u{306A}\u{3044}\u{30A8}\u{30E9}\u{30FC}: ${t}`)}return 0===i.nodeList.length?null:{type:"nodeList",children:i.nodeList}})(i),l={fontSize:parseInt(d.value,10),baseBackgroundColor:g.checked?null:s.value,backgroundColor:F.checked?null:f.value,textColor:b.value,listRenderType:m.checked?"TerminalOffset":"Original"};o.innerHTML=function(e,t){let o={...x,...t};if(!e)return"";let n=w(e,o),i=n.width+o.margin.left+o.margin.right,l=n.height+o.margin.top+o.margin.bottom,r="<svg ";r+=`width="${i.toFixed(1)}" height="${l.toFixed(1)}" `,r+=`viewBox="0 0 ${i.toFixed(1)} ${l.toFixed(1)}" `,r+='xmlns="http://www.w3.org/2000/svg">';let d=o.baseBackgroundColor??"none";return r+='<rect x="0" y="0" ',r+=`width="${i.toFixed(1)}" height="${l.toFixed(1)}" `,r+=`fill="${d}"/>`,r+=v(o.margin.left,o.margin.top,n.svg),r+="</svg>"}(t,l)}catch(e){e instanceof Error?(o.innerHTML=`<p style="color: red;">Error: ${e.message}</p>`,console.error("SPD conversion error:",e)):(o.innerHTML='<p style="color: red;">An unknown error occurred</p>',console.error("An unknown error occurred:",e))}};g.addEventListener("change",()=>{s.disabled=g.checked}),F.addEventListener("change",()=>{f.disabled=F.checked}),t.addEventListener("input",L),y.addEventListener("click",L),t.addEventListener("keydown",e=>{if("Tab"===e.key){e.preventDefault();let o=t.selectionStart,n=t.selectionEnd;t.value=t.value.substring(0,o)+"	"+t.value.substring(n),t.selectionStart=t.selectionEnd=o+1,L()}}),i.addEventListener("change",e=>{let o=e.target.files?.[0];if(o){let e=new FileReader;e.onload=e=>{t.value=e.target?.result,L()},e.readAsText(o)}}),l.addEventListener("click",()=>{let e=t.value,o=prompt("ダウンロードするファイル名を入力してください:","edited_spd.spd");if(null===o)return;o.endsWith(".spd")||(o+=".spd");let n=new Blob([e],{type:"text/plain"}),i=URL.createObjectURL(n),l=document.createElement("a");l.href=i,l.download=o,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)}),r.addEventListener("click",()=>{let e=o.innerHTML;if(!e)return void alert("SVGが生成されていません。");let t=prompt("ダウンロードするSVGファイル名を入力してください:","output.svg");if(null===t)return;t.endsWith(".svg")||(t+=".svg");let n=new Blob([e],{type:"image/svg+xml"}),i=URL.createObjectURL(n),l=document.createElement("a");l.href=i,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)}),t.value=`:terminal \u{958B}\u{59CB}
\u{547D}\u{4EE4}
:comment \u{30B3}\u{30E1}\u{30F3}\u{30C8}\u{6587}
:call \u{95A2}\u{6570}\u{547C}\u{3073}\u{51FA}\u{3057}
	\u{4E2D}\u{8EAB}
:if \u{6761}\u{4EF6}\u{5F0F}
	\u{771F}\u{306E}\u{5834}\u{5408}
:else
	\u{507D}\u{306E}\u{5834}\u{5408}(:else\u{4EE5}\u{4E0B}\u{306F}\u{7701}\u{7565}\u{53EF}\u{80FD})
:switch \u{6761}\u{4EF6}
:case \u{30B1}\u{30FC}\u{30B9}1
	\u{30B1}\u{30FC}\u{30B9}1\u{306E}\u{4E2D}\u{8EAB}
:case \u{30B1}\u{30FC}\u{30B9}2
	\u{30B1}\u{30FC}\u{30B9}2\u{306E}\u{4E2D}\u{8EAB}
:case ...
	\u{30B1}\u{30FC}\u{30B9}\u{6587}\u{306F}\u{5FC5}\u{8981}\u{306B}\u{5FDC}\u{3058}\u{3066}\u{3044}\u{304F}\u{3064}\u{3067}\u{3082}\u{8FFD}\u{52A0}\u{3067}\u{304D}\u{307E}\u{3059}
:while \u{7E70}\u{308A}\u{8FD4}\u{3057}\u{6761}\u{4EF6}\u{FF08}\u{5148}\u{5224}\u{5B9A}\u{FF09}
	\u{4E2D}\u{8EAB}
:dowhile \u{7E70}\u{308A}\u{8FD4}\u{3057}\u{6761}\u{4EF6}\u{FF08}\u{5F8C}\u{5224}\u{5B9A}\u{FF09}
	\u{4E2D}\u{8EAB}
:terminal \u{7D42}\u{4E86}`,L()});
//# sourceMappingURL=web.9ea045c1.js.map
