{"mappings":"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,KACpC,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,MAAW,GACX,MAAW,GACX,KAAU,GAAa,GAAa,KACpC,KAAU,GAAa,GAAa,KACpC,KAAU,GAAa,GAAa,KACpC,KAAU,GAAa,GAAa,KACpC,KAAU,GAAa,GAAa,KACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,OAAW,GACX,OAAW,GACX,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,MAAU,GAAa,GAAa,MACpC,OAAW,GACX,MAAU,GAAa,GAAa,MACpC,QAAW,GACX,QAAW,GACX,OAAU,GAAa,GAAa,OACpC,OAAU,GAAa,GAAa,OACpC,OAAU,GAAa,GAAa,OACpC,OAAU,GAAa,GAAa,OACpC,OAAU,GAAa,GAAa,OACpC,QAAW,GACX,QAAW,GAAa,GAAa,QACrC,QAAW,GAAa,GAAa,QACrC,QAAW,GAAa,GAAa,QA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","sources":["<anon>","web/src/main.ts","src/spd/parser.ts","src/spd/svg-renderer.ts","node_modules/eastasianwidth/eastasianwidth.js"],"sourcesContent":["// web/src/main.ts\nclass $30ca700923f7cd7e$export$f9c837a54db411d extends Error {\n    constructor(message){\n        super(message);\n        this.name = this.constructor.name;\n    }\n}\nclass $30ca700923f7cd7e$export$eaf10ed6e5991cf8 extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(){\n        super(\"\\u3053\\u306E\\u30B3\\u30DE\\u30F3\\u30C9\\u306F\\u5F15\\u6570\\u304C\\u5FC5\\u8981\\u3067\\u3059\");\n    }\n}\nclass $30ca700923f7cd7e$export$1d21b533e0dc3eed extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(){\n        super(\"\\u3053\\u306E\\u30B3\\u30DE\\u30F3\\u30C9\\u306B\\u5F15\\u6570\\u306F\\u4E0D\\u8981\\u3067\\u3059\");\n    }\n}\nclass $30ca700923f7cd7e$export$d0be8b16a0056b4a extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(){\n        super(\"\\u30A4\\u30F3\\u30C7\\u30F3\\u30C8\\u306E\\u6570\\u304C\\u4E0D\\u6B63\\u3067\\u3059\");\n    }\n}\nclass $30ca700923f7cd7e$export$1e06c21ce32643dc extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(){\n        super(\"\\u672A\\u77E5\\u306E\\u30B3\\u30DE\\u30F3\\u30C9\\u3067\\u3059\");\n    }\n}\nclass $30ca700923f7cd7e$export$91a4fa3e8e7c8586 extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(){\n        super(\"\\u4E0D\\u9069\\u5207\\u306Aelse\\u3067\\u3059\");\n    }\n}\nclass $30ca700923f7cd7e$export$773fc764960da4ba extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(){\n        super(\"\\u4E0D\\u9069\\u5207\\u306Acase\\u304C\\u73FE\\u308C\\u307E\\u3057\\u305F\");\n    }\n}\nclass $30ca700923f7cd7e$export$a235ab136f3fda43 extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(){\n        super(\"\\u65E2\\u306B\\u540C\\u540D\\u306ECase\\u304C\\u5B58\\u5728\\u3057\\u307E\\u3059\");\n    }\n}\nclass $30ca700923f7cd7e$export$ecfc75b1ea638281 extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(message){\n        super(`\\u{5185}\\u{90E8}\\u{30A8}\\u{30E9}\\u{30FC}:${message}`);\n    }\n}\nclass $30ca700923f7cd7e$export$aeae85cd74b5f02 extends $30ca700923f7cd7e$export$f9c837a54db411d {\n    constructor(){\n        super(\"\\u4E88\\u671F\\u3057\\u306A\\u3044IO\\u30A8\\u30E9\\u30FC\\u304C\\u767A\\u751F\\u3057\\u307E\\u3057\\u305F\");\n    }\n}\n/**\n * パース中のコンテキストを扱うクラス。\n */ class $30ca700923f7cd7e$var$Context {\n    constructor(){\n        // 親のコンテキスト\n        this.parent = null;\n        // 深さ\n        this.depth = 0;\n        // ノードリスト\n        this.nodeList = [];\n        // コンテキストの追加状態\n        this.optionStatus = \"Default\";\n        // コンテキストの状態に結びつく引数\n        this.optionArg = null;\n    }\n}\n/**\n * SPD (Simple PAD Description) フォーマットのパーサー。\n */ // コメントを判定する正規表現オブジェクト\nconst $30ca700923f7cd7e$var$patternComment = /^\\s*(#.*)?$/;\nconst $30ca700923f7cd7e$var$DummyParseErrorReceiver = ()=>{\n    return false;\n};\n/**\n * 本文を処理する\n * @param context 現在のコンテキスト\n * @param body 本文\n */ const $30ca700923f7cd7e$var$handleBody = (context, body)=>{\n    // 状態の制御\n    if (context.nodeList.length > 0) {\n        const lnode = context.nodeList[context.nodeList.length - 1];\n        if (context.optionArg != null && lnode.type === \"switch\") {\n            const node = lnode;\n            node.cases.set(context.optionArg, null);\n            context.optionArg = null;\n        }\n    }\n    if (body.startsWith(\":\")) {\n        const parts = body.split(/[ \\t]+/);\n        // コマンド部分と引数部分を分離\n        const cmd = parts[0].substring(1); // コマンド名（例: \"call\", \"if\"）\n        const arg = parts.length > 1 ? body.substring(parts[0].length).trim() : null; // 引数\n        switch(cmd){\n            case \"call\":\n                if (!arg) throw new $30ca700923f7cd7e$export$eaf10ed6e5991cf8();\n                context.nodeList.push({\n                    type: \"call\",\n                    text: arg,\n                    childNode: null\n                });\n                context.optionStatus = \"Default\";\n                context.optionArg = null;\n                break;\n            case \"terminal\":\n                if (!arg) throw new $30ca700923f7cd7e$export$eaf10ed6e5991cf8();\n                context.nodeList.push({\n                    type: \"terminal\",\n                    text: arg\n                });\n                context.optionStatus = \"Default\";\n                context.optionArg = null;\n                break;\n            case \"comment\":\n                if (!arg) throw new $30ca700923f7cd7e$export$eaf10ed6e5991cf8();\n                context.nodeList.push({\n                    type: \"comment\",\n                    text: arg\n                });\n                context.optionStatus = \"Default\";\n                context.optionArg = null;\n                break;\n            case \"while\":\n                if (!arg) throw new $30ca700923f7cd7e$export$eaf10ed6e5991cf8();\n                context.nodeList.push({\n                    type: \"loop\",\n                    isWhile: true,\n                    text: arg,\n                    childNode: null\n                });\n                context.optionStatus = \"Default\";\n                context.optionArg = null;\n                break;\n            case \"dowhile\":\n                if (!arg) throw new $30ca700923f7cd7e$export$eaf10ed6e5991cf8();\n                context.nodeList.push({\n                    type: \"loop\",\n                    isWhile: false,\n                    text: arg,\n                    childNode: null\n                });\n                context.optionStatus = \"Default\";\n                context.optionArg = null;\n                break;\n            case \"if\":\n                if (!arg) throw new $30ca700923f7cd7e$export$eaf10ed6e5991cf8();\n                context.nodeList.push({\n                    type: \"if\",\n                    text: arg,\n                    trueNode: null,\n                    falseNode: null\n                });\n                context.optionStatus = \"Default\";\n                context.optionArg = null;\n                break;\n            case \"switch\":\n                if (!arg) throw new $30ca700923f7cd7e$export$eaf10ed6e5991cf8();\n                context.nodeList.push({\n                    type: \"switch\",\n                    text: arg,\n                    cases: new Map()\n                });\n                context.optionStatus = \"Default\";\n                context.optionArg = null;\n                break;\n            case \"else\":\n                {\n                    const lastIfNode = context.nodeList.length === 0 ? null : context.nodeList[context.nodeList.length - 1];\n                    if (lastIfNode === null || lastIfNode.type !== \"if\") throw new $30ca700923f7cd7e$export$91a4fa3e8e7c8586();\n                    if (arg !== null) throw new $30ca700923f7cd7e$export$1d21b533e0dc3eed();\n                    context.optionStatus = \"Else\";\n                    context.optionArg = null;\n                    break;\n                }\n            case \"case\":\n                {\n                    const lastSwitchNode = context.nodeList.length === 0 ? null : context.nodeList[context.nodeList.length - 1];\n                    if (lastSwitchNode === null || lastSwitchNode.type !== \"switch\") throw new $30ca700923f7cd7e$export$773fc764960da4ba();\n                    if (!arg) throw new $30ca700923f7cd7e$export$eaf10ed6e5991cf8();\n                    if (lastSwitchNode.cases.has(arg)) throw new $30ca700923f7cd7e$export$a235ab136f3fda43();\n                    context.optionStatus = \"Default\";\n                    context.optionArg = arg;\n                    break;\n                }\n            default:\n                throw new $30ca700923f7cd7e$export$1e06c21ce32643dc();\n        }\n    } else {\n        context.nodeList.push({\n            type: \"process\",\n            text: body,\n            childNode: null\n        });\n        context.optionStatus = \"Default\";\n        context.optionArg = null;\n    }\n};\n/**\n * 現在のコンテキストを確定し、親コンテキストに移動します。\n * @param context 現在のコンテキスト。\n * @returns 親コンテキスト。\n */ const $30ca700923f7cd7e$var$upToParent = (context)=>{\n    if (context === null) return null;\n    // 状態の制御\n    if (context.nodeList.length > 0) {\n        const lnode = context.nodeList[context.nodeList.length - 1];\n        if (context.optionArg != null && lnode.type === \"switch\") {\n            const node = lnode;\n            node.cases.set(context.optionArg, null);\n            context.optionArg = null;\n        }\n    }\n    if (context.parent === null) return null;\n    // 追加するノードを新規作成。\n    let newNode = null;\n    if (context.nodeList.length === 0) return context.parent;\n    else if (context.nodeList.length === 1) newNode = context.nodeList[0];\n    else {\n        const nodeList = {\n            type: \"nodeList\",\n            children: []\n        };\n        for(let i = 0; i < context.nodeList.length; i++)nodeList.children.push(context.nodeList[i]);\n        newNode = nodeList;\n    }\n    // ノードの追加先となるノード。\n    const pnode = context.parent.nodeList[context.parent.nodeList.length - 1];\n    // ノードの種類に応じてノードの追加先に追加。\n    switch(pnode.type){\n        case \"process\":\n            {\n                const processNode = pnode;\n                processNode.childNode = newNode;\n                break;\n            }\n        case \"loop\":\n            {\n                const loopNode = pnode;\n                loopNode.childNode = newNode;\n                break;\n            }\n        case \"call\":\n            {\n                const callNode = pnode;\n                callNode.childNode = newNode;\n                break;\n            }\n        case \"switch\":\n            {\n                const snode = pnode;\n                if (context.parent.optionArg !== null) snode.cases.set(context.parent.optionArg, newNode);\n                else throw new $30ca700923f7cd7e$export$ecfc75b1ea638281(\"optionArg is null when it shouldn't be for switch node.\");\n                break;\n            }\n        case \"if\":\n            {\n                const ifnode = pnode;\n                if (context.parent.optionStatus === \"Default\") ifnode.trueNode = newNode;\n                else if (context.parent.optionStatus === \"Else\") {\n                    if (ifnode.falseNode !== null) throw new $30ca700923f7cd7e$export$91a4fa3e8e7c8586();\n                    else ifnode.falseNode = newNode;\n                }\n                break;\n            }\n    }\n    // 親ノードの状態をリセットする。\n    context.parent.optionStatus = \"Default\";\n    context.parent.optionArg = null;\n    // 親ノードを返す。\n    return context.parent;\n};\nconst $30ca700923f7cd7e$export$98e6a39c04603d36 = (src, exr = $30ca700923f7cd7e$var$DummyParseErrorReceiver)=>{\n    // if(src == null) throw new IllegalArgumentException(\"src is null\"); // # diff TypeScriptではnullチェックは不要\n    // 先頭のコンテキスト\n    const rootContext = new $30ca700923f7cd7e$var$Context();\n    // 現在のコンテキスト\n    let context = rootContext;\n    // １行づつ読み込む\n    // ソースコードを行ごとに分割\n    const lines = src.split(/\\r?\\n/);\n    let lineNo = 0; // 現在の行番号\n    try {\n        while(lineNo < lines.length){\n            const line = lines[lineNo];\n            lineNo++;\n            // コメント行は読み飛ばし\n            if ($30ca700923f7cd7e$var$patternComment.test(line)) continue;\n            // 先頭のタブ数を数える。\n            let tabNum = 0;\n            for(let i = 0; i < line.length; ++i){\n                if (line.charAt(i) === \"\\t\") tabNum++;\n                else break;\n            }\n            try {\n                if (context === null) throw new $30ca700923f7cd7e$export$d0be8b16a0056b4a();\n                // 子コンテキストの作成処理を行う。\n                if (tabNum > 0 && context.nodeList.length === 0 || tabNum < 0) // 最初からタブがある場合は不正。\n                throw new $30ca700923f7cd7e$export$d0be8b16a0056b4a();\n                if (tabNum > context.depth) {\n                    // タブが増加した場合の処理\n                    // 正当性をチェックする。\n                    const parentNode = context.nodeList[context.nodeList.length - 1];\n                    if (tabNum > context.depth + 1 || parentNode && parentNode.type === \"comment\") // 親がコメントか２階層以上離れているのは不正。\n                    throw new $30ca700923f7cd7e$export$d0be8b16a0056b4a();\n                    if (parentNode.type === \"switch\" && context.optionArg == null) // 子を持たないタイプの場合は不正。\n                    throw new $30ca700923f7cd7e$export$d0be8b16a0056b4a();\n                    // 子コンテキストを生成する。\n                    const newContext = new $30ca700923f7cd7e$var$Context();\n                    newContext.parent = context;\n                    newContext.depth = context.depth + 1;\n                    context = newContext;\n                }\n                // タブが減少した際の処理\n                while(tabNum < context.depth){\n                    context = $30ca700923f7cd7e$var$upToParent(context);\n                    if (context === null) throw new $30ca700923f7cd7e$export$d0be8b16a0056b4a();\n                }\n                // 本文は行のデータをtrimしたものとする。\n                // 行末が @ の場合は複数行扱いとする。\n                let body = line.substring(tabNum); // タブの後の本体部分を抽出\n                if (body.endsWith(\"@\")) {\n                    let multiLineContent = body.substring(0, body.length - 1);\n                    while(lineNo < lines.length){\n                        const nextLine = lines[lineNo];\n                        lineNo++;\n                        // コメント行で止まる\n                        if ($30ca700923f7cd7e$var$patternComment.test(nextLine)) continue;\n                        // 行末に @ が間読み込む\n                        // 行末に @ がある間読み込む\n                        let nextLineTabNum = 0;\n                        for(let i = 0; i < nextLine.length; ++i){\n                            if (nextLine.charAt(i) === \"\\t\") nextLineTabNum++;\n                            else break;\n                        }\n                        const nextLineBody = nextLine.substring(nextLineTabNum);\n                        if (nextLineBody.endsWith(\"@\")) multiLineContent += `\\n${nextLineBody.substring(0, nextLineBody.length - 1)}`;\n                        else {\n                            multiLineContent += `\\n${nextLineBody}`;\n                            break;\n                        }\n                    }\n                    body = multiLineContent;\n                }\n                body = body.replace(/@/g, \"\\n\");\n                // 本文を処理する。\n                if (context !== null) $30ca700923f7cd7e$var$handleBody(context, body);\n                else throw new $30ca700923f7cd7e$export$d0be8b16a0056b4a(); // contextがnullの場合、これは不正な状態を示す\n            } catch (ex) {\n                if (ex instanceof $30ca700923f7cd7e$export$f9c837a54db411d) {\n                    if (exr(line, lineNo - 1, ex)) ;\n                    else throw ex;\n                } else throw ex;\n            }\n        }\n        // 先頭まで戻る\n        while(context != null)context = $30ca700923f7cd7e$var$upToParent(context);\n    } catch (ex) {\n        if (ex instanceof $30ca700923f7cd7e$export$f9c837a54db411d) throw ex; // テストと適切なエラーハンドリングのためにParseErrorを再スロー\n        else {\n            console.error(`\\u{884C} ${lineNo} \\u{3067}\\u{4E88}\\u{671F}\\u{3057}\\u{306A}\\u{3044}\\u{30A8}\\u{30E9}\\u{30FC}\\u{304C}\\u{767A}\\u{751F}\\u{3057}\\u{307E}\\u{3057}\\u{305F}: ${ex}`);\n            throw new $30ca700923f7cd7e$export$f9c837a54db411d(`\\u{4E88}\\u{671F}\\u{3057}\\u{306A}\\u{3044}\\u{30A8}\\u{30E9}\\u{30FC}: ${ex}`); // その他のエラーをラップ\n        }\n    }\n    // モデルを最終化して返す\n    if (rootContext.nodeList.length === 0) return null;\n    const topNode = {\n        type: \"nodeList\",\n        children: rootContext.nodeList\n    };\n    return topNode;\n};\n\n\nvar $c197fae6480f2e77$exports = {};\nvar $c197fae6480f2e77$var$eaw = {};\n$c197fae6480f2e77$exports = $c197fae6480f2e77$var$eaw;\n$c197fae6480f2e77$var$eaw.eastAsianWidth = function(character) {\n    var x = character.charCodeAt(0);\n    var y = character.length === 2 ? character.charCodeAt(1) : 0;\n    var codePoint = x;\n    if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {\n        x &= 0x3FF;\n        y &= 0x3FF;\n        codePoint = x << 10 | y;\n        codePoint += 0x10000;\n    }\n    if (0x3000 === codePoint || 0xFF01 <= codePoint && codePoint <= 0xFF60 || 0xFFE0 <= codePoint && codePoint <= 0xFFE6) return 'F';\n    if (0x20A9 === codePoint || 0xFF61 <= codePoint && codePoint <= 0xFFBE || 0xFFC2 <= codePoint && codePoint <= 0xFFC7 || 0xFFCA <= codePoint && codePoint <= 0xFFCF || 0xFFD2 <= codePoint && codePoint <= 0xFFD7 || 0xFFDA <= codePoint && codePoint <= 0xFFDC || 0xFFE8 <= codePoint && codePoint <= 0xFFEE) return 'H';\n    if (0x1100 <= codePoint && codePoint <= 0x115F || 0x11A3 <= codePoint && codePoint <= 0x11A7 || 0x11FA <= codePoint && codePoint <= 0x11FF || 0x2329 <= codePoint && codePoint <= 0x232A || 0x2E80 <= codePoint && codePoint <= 0x2E99 || 0x2E9B <= codePoint && codePoint <= 0x2EF3 || 0x2F00 <= codePoint && codePoint <= 0x2FD5 || 0x2FF0 <= codePoint && codePoint <= 0x2FFB || 0x3001 <= codePoint && codePoint <= 0x303E || 0x3041 <= codePoint && codePoint <= 0x3096 || 0x3099 <= codePoint && codePoint <= 0x30FF || 0x3105 <= codePoint && codePoint <= 0x312D || 0x3131 <= codePoint && codePoint <= 0x318E || 0x3190 <= codePoint && codePoint <= 0x31BA || 0x31C0 <= codePoint && codePoint <= 0x31E3 || 0x31F0 <= codePoint && codePoint <= 0x321E || 0x3220 <= codePoint && codePoint <= 0x3247 || 0x3250 <= codePoint && codePoint <= 0x32FE || 0x3300 <= codePoint && codePoint <= 0x4DBF || 0x4E00 <= codePoint && codePoint <= 0xA48C || 0xA490 <= codePoint && codePoint <= 0xA4C6 || 0xA960 <= codePoint && codePoint <= 0xA97C || 0xAC00 <= codePoint && codePoint <= 0xD7A3 || 0xD7B0 <= codePoint && codePoint <= 0xD7C6 || 0xD7CB <= codePoint && codePoint <= 0xD7FB || 0xF900 <= codePoint && codePoint <= 0xFAFF || 0xFE10 <= codePoint && codePoint <= 0xFE19 || 0xFE30 <= codePoint && codePoint <= 0xFE52 || 0xFE54 <= codePoint && codePoint <= 0xFE66 || 0xFE68 <= codePoint && codePoint <= 0xFE6B || 0x1B000 <= codePoint && codePoint <= 0x1B001 || 0x1F200 <= codePoint && codePoint <= 0x1F202 || 0x1F210 <= codePoint && codePoint <= 0x1F23A || 0x1F240 <= codePoint && codePoint <= 0x1F248 || 0x1F250 <= codePoint && codePoint <= 0x1F251 || 0x20000 <= codePoint && codePoint <= 0x2F73F || 0x2B740 <= codePoint && codePoint <= 0x2FFFD || 0x30000 <= codePoint && codePoint <= 0x3FFFD) return 'W';\n    if (0x0020 <= codePoint && codePoint <= 0x007E || 0x00A2 <= codePoint && codePoint <= 0x00A3 || 0x00A5 <= codePoint && codePoint <= 0x00A6 || 0x00AC === codePoint || 0x00AF === codePoint || 0x27E6 <= codePoint && codePoint <= 0x27ED || 0x2985 <= codePoint && codePoint <= 0x2986) return 'Na';\n    if (0x00A1 === codePoint || 0x00A4 === codePoint || 0x00A7 <= codePoint && codePoint <= 0x00A8 || 0x00AA === codePoint || 0x00AD <= codePoint && codePoint <= 0x00AE || 0x00B0 <= codePoint && codePoint <= 0x00B4 || 0x00B6 <= codePoint && codePoint <= 0x00BA || 0x00BC <= codePoint && codePoint <= 0x00BF || 0x00C6 === codePoint || 0x00D0 === codePoint || 0x00D7 <= codePoint && codePoint <= 0x00D8 || 0x00DE <= codePoint && codePoint <= 0x00E1 || 0x00E6 === codePoint || 0x00E8 <= codePoint && codePoint <= 0x00EA || 0x00EC <= codePoint && codePoint <= 0x00ED || 0x00F0 === codePoint || 0x00F2 <= codePoint && codePoint <= 0x00F3 || 0x00F7 <= codePoint && codePoint <= 0x00FA || 0x00FC === codePoint || 0x00FE === codePoint || 0x0101 === codePoint || 0x0111 === codePoint || 0x0113 === codePoint || 0x011B === codePoint || 0x0126 <= codePoint && codePoint <= 0x0127 || 0x012B === codePoint || 0x0131 <= codePoint && codePoint <= 0x0133 || 0x0138 === codePoint || 0x013F <= codePoint && codePoint <= 0x0142 || 0x0144 === codePoint || 0x0148 <= codePoint && codePoint <= 0x014B || 0x014D === codePoint || 0x0152 <= codePoint && codePoint <= 0x0153 || 0x0166 <= codePoint && codePoint <= 0x0167 || 0x016B === codePoint || 0x01CE === codePoint || 0x01D0 === codePoint || 0x01D2 === codePoint || 0x01D4 === codePoint || 0x01D6 === codePoint || 0x01D8 === codePoint || 0x01DA === codePoint || 0x01DC === codePoint || 0x0251 === codePoint || 0x0261 === codePoint || 0x02C4 === codePoint || 0x02C7 === codePoint || 0x02C9 <= codePoint && codePoint <= 0x02CB || 0x02CD === codePoint || 0x02D0 === codePoint || 0x02D8 <= codePoint && codePoint <= 0x02DB || 0x02DD === codePoint || 0x02DF === codePoint || 0x0300 <= codePoint && codePoint <= 0x036F || 0x0391 <= codePoint && codePoint <= 0x03A1 || 0x03A3 <= codePoint && codePoint <= 0x03A9 || 0x03B1 <= codePoint && codePoint <= 0x03C1 || 0x03C3 <= codePoint && codePoint <= 0x03C9 || 0x0401 === codePoint || 0x0410 <= codePoint && codePoint <= 0x044F || 0x0451 === codePoint || 0x2010 === codePoint || 0x2013 <= codePoint && codePoint <= 0x2016 || 0x2018 <= codePoint && codePoint <= 0x2019 || 0x201C <= codePoint && codePoint <= 0x201D || 0x2020 <= codePoint && codePoint <= 0x2022 || 0x2024 <= codePoint && codePoint <= 0x2027 || 0x2030 === codePoint || 0x2032 <= codePoint && codePoint <= 0x2033 || 0x2035 === codePoint || 0x203B === codePoint || 0x203E === codePoint || 0x2074 === codePoint || 0x207F === codePoint || 0x2081 <= codePoint && codePoint <= 0x2084 || 0x20AC === codePoint || 0x2103 === codePoint || 0x2105 === codePoint || 0x2109 === codePoint || 0x2113 === codePoint || 0x2116 === codePoint || 0x2121 <= codePoint && codePoint <= 0x2122 || 0x2126 === codePoint || 0x212B === codePoint || 0x2153 <= codePoint && codePoint <= 0x2154 || 0x215B <= codePoint && codePoint <= 0x215E || 0x2160 <= codePoint && codePoint <= 0x216B || 0x2170 <= codePoint && codePoint <= 0x2179 || 0x2189 === codePoint || 0x2190 <= codePoint && codePoint <= 0x2199 || 0x21B8 <= codePoint && codePoint <= 0x21B9 || 0x21D2 === codePoint || 0x21D4 === codePoint || 0x21E7 === codePoint || 0x2200 === codePoint || 0x2202 <= codePoint && codePoint <= 0x2203 || 0x2207 <= codePoint && codePoint <= 0x2208 || 0x220B === codePoint || 0x220F === codePoint || 0x2211 === codePoint || 0x2215 === codePoint || 0x221A === codePoint || 0x221D <= codePoint && codePoint <= 0x2220 || 0x2223 === codePoint || 0x2225 === codePoint || 0x2227 <= codePoint && codePoint <= 0x222C || 0x222E === codePoint || 0x2234 <= codePoint && codePoint <= 0x2237 || 0x223C <= codePoint && codePoint <= 0x223D || 0x2248 === codePoint || 0x224C === codePoint || 0x2252 === codePoint || 0x2260 <= codePoint && codePoint <= 0x2261 || 0x2264 <= codePoint && codePoint <= 0x2267 || 0x226A <= codePoint && codePoint <= 0x226B || 0x226E <= codePoint && codePoint <= 0x226F || 0x2282 <= codePoint && codePoint <= 0x2283 || 0x2286 <= codePoint && codePoint <= 0x2287 || 0x2295 === codePoint || 0x2299 === codePoint || 0x22A5 === codePoint || 0x22BF === codePoint || 0x2312 === codePoint || 0x2460 <= codePoint && codePoint <= 0x24E9 || 0x24EB <= codePoint && codePoint <= 0x254B || 0x2550 <= codePoint && codePoint <= 0x2573 || 0x2580 <= codePoint && codePoint <= 0x258F || 0x2592 <= codePoint && codePoint <= 0x2595 || 0x25A0 <= codePoint && codePoint <= 0x25A1 || 0x25A3 <= codePoint && codePoint <= 0x25A9 || 0x25B2 <= codePoint && codePoint <= 0x25B3 || 0x25B6 <= codePoint && codePoint <= 0x25B7 || 0x25BC <= codePoint && codePoint <= 0x25BD || 0x25C0 <= codePoint && codePoint <= 0x25C1 || 0x25C6 <= codePoint && codePoint <= 0x25C8 || 0x25CB === codePoint || 0x25CE <= codePoint && codePoint <= 0x25D1 || 0x25E2 <= codePoint && codePoint <= 0x25E5 || 0x25EF === codePoint || 0x2605 <= codePoint && codePoint <= 0x2606 || 0x2609 === codePoint || 0x260E <= codePoint && codePoint <= 0x260F || 0x2614 <= codePoint && codePoint <= 0x2615 || 0x261C === codePoint || 0x261E === codePoint || 0x2640 === codePoint || 0x2642 === codePoint || 0x2660 <= codePoint && codePoint <= 0x2661 || 0x2663 <= codePoint && codePoint <= 0x2665 || 0x2667 <= codePoint && codePoint <= 0x266A || 0x266C <= codePoint && codePoint <= 0x266D || 0x266F === codePoint || 0x269E <= codePoint && codePoint <= 0x269F || 0x26BE <= codePoint && codePoint <= 0x26BF || 0x26C4 <= codePoint && codePoint <= 0x26CD || 0x26CF <= codePoint && codePoint <= 0x26E1 || 0x26E3 === codePoint || 0x26E8 <= codePoint && codePoint <= 0x26FF || 0x273D === codePoint || 0x2757 === codePoint || 0x2776 <= codePoint && codePoint <= 0x277F || 0x2B55 <= codePoint && codePoint <= 0x2B59 || 0x3248 <= codePoint && codePoint <= 0x324F || 0xE000 <= codePoint && codePoint <= 0xF8FF || 0xFE00 <= codePoint && codePoint <= 0xFE0F || 0xFFFD === codePoint || 0x1F100 <= codePoint && codePoint <= 0x1F10A || 0x1F110 <= codePoint && codePoint <= 0x1F12D || 0x1F130 <= codePoint && codePoint <= 0x1F169 || 0x1F170 <= codePoint && codePoint <= 0x1F19A || 0xE0100 <= codePoint && codePoint <= 0xE01EF || 0xF0000 <= codePoint && codePoint <= 0xFFFFD || 0x100000 <= codePoint && codePoint <= 0x10FFFD) return 'A';\n    return 'N';\n};\n$c197fae6480f2e77$var$eaw.characterLength = function(character) {\n    var code = this.eastAsianWidth(character);\n    if (code === 'F' || code === 'W' || code === 'A') return 2;\n    else return 1;\n};\n// Split a string considering surrogate-pairs.\nfunction $c197fae6480f2e77$var$stringToArray(string) {\n    return string.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[^\\uD800-\\uDFFF]/g) || [];\n}\n$c197fae6480f2e77$var$eaw.length = function(string) {\n    var characters = $c197fae6480f2e77$var$stringToArray(string);\n    var len = 0;\n    for(var i = 0; i < characters.length; i++)len = len + this.characterLength(characters[i]);\n    return len;\n};\n$c197fae6480f2e77$var$eaw.slice = function(text, start, end) {\n    var textLen = $c197fae6480f2e77$var$eaw.length(text);\n    start = start === undefined || start === null ? 0 : start;\n    end = end === undefined || start === null ? 1 : end;\n    if (start < 0) start = textLen + start;\n    if (end < 0) end = textLen + end;\n    var result = '';\n    var eawLen = 0;\n    var chars = $c197fae6480f2e77$var$stringToArray(text);\n    for(var i = 0; i < chars.length; i++){\n        var char = chars[i];\n        var charLen = $c197fae6480f2e77$var$eaw.length(char);\n        if (eawLen >= start - (charLen === 2 ? 1 : 0)) {\n            if (eawLen + charLen <= end) result += char;\n            else break;\n        }\n        eawLen += charLen;\n    }\n    return result;\n};\n\n\n// デフォルトの描画オプション\nconst $6b098df580cc3f14$var$defaultRenderOptions = {\n    fontSize: 14,\n    fontFamily: \"sans-serif\",\n    margin: {\n        top: 20,\n        right: 20,\n        bottom: 20,\n        left: 20\n    },\n    boxPadding: {\n        top: 10,\n        right: 10,\n        bottom: 10,\n        left: 10\n    },\n    branchePadding: {\n        top: 5,\n        right: 5,\n        bottom: 5,\n        left: 5\n    },\n    strokeWidth: 1,\n    strokeColor: \"#000000\",\n    backgroundColor: \"#ffffff\",\n    baseBackgroundColor: null,\n    textColor: \"#000000\",\n    lineHeight: 1.2,\n    doubleLineWidth: 5,\n    switchNodeCaseWidth: 20,\n    connectorWidth: 2,\n    nodeListSpace: 10,\n    childNodeOffsetWidth: 20,\n    listRenderType: \"original\"\n};\nfunction $6b098df580cc3f14$export$b3890eb0ae9dca99(node, options) {\n    const mergedOptions = {\n        ...$6b098df580cc3f14$var$defaultRenderOptions,\n        ...options\n    };\n    if (!node) return \"\";\n    const fragment = $6b098df580cc3f14$var$renderNode(node, mergedOptions);\n    const svgWidth = fragment.width + mergedOptions.margin.left + mergedOptions.margin.right;\n    const svgHeight = fragment.height + mergedOptions.margin.top + mergedOptions.margin.bottom;\n    let svg = `<svg `;\n    svg += `width=\"${svgWidth.toFixed(1)}\" height=\"${svgHeight.toFixed(1)}\" `;\n    svg += `viewBox=\"0 0 ${svgWidth.toFixed(1)} ${svgHeight.toFixed(1)}\" `;\n    svg += `xmlns=\"http://www.w3.org/2000/svg\">`;\n    const baseFillColor = mergedOptions.baseBackgroundColor ?? \"none\";\n    svg += `<rect x=\"0\" y=\"0\" `;\n    svg += `width=\"${svgWidth.toFixed(1)}\" height=\"${svgHeight.toFixed(1)}\" `;\n    svg += `fill=\"${baseFillColor}\"/>`;\n    svg += $6b098df580cc3f14$var$renderTransformTranslateSvg(mergedOptions.margin.left, mergedOptions.margin.top, fragment.svg);\n    svg += `</svg>`;\n    return svg;\n}\n/**\n * ASTのノード種別に応じて、対応する描画関数を呼び出す\n */ function $6b098df580cc3f14$var$renderNode(node, options) {\n    switch(node.type){\n        case \"process\":\n            return $6b098df580cc3f14$var$renderProcessFragment(node, options);\n        case \"terminal\":\n            return $6b098df580cc3f14$var$renderTerminalFragment(node, options);\n        case \"nodeList\":\n            return $6b098df580cc3f14$var$renderListFragment(node, options);\n        case \"call\":\n            return $6b098df580cc3f14$var$renderCallFragment(node, options);\n        case \"loop\":\n            return $6b098df580cc3f14$var$renderLoopFragment(node, options);\n        case \"if\":\n            return $6b098df580cc3f14$var$renderIfFragment(node, options);\n        case \"switch\":\n            return $6b098df580cc3f14$var$renderSwitchFragment(node, options);\n        case \"comment\":\n            return $6b098df580cc3f14$var$renderCommentFragment(node, options);\n        // 他のノードタイプは後で追加\n        default:\n            return {\n                svg: \"\",\n                width: 0,\n                height: 0,\n                type: \"Unknown\"\n            }; // 未実装のノードタイプ\n    }\n}\n/**\n * 箱型ノードの描画処理\n */ function $6b098df580cc3f14$var$renderBoxFragment(node, options) {\n    const textMetrics = $6b098df580cc3f14$var$measureTextSvg(node.text, options);\n    let contentWidth = textMetrics.width;\n    let contentHeight = textMetrics.height;\n    let textOffsetX = options.boxPadding.left;\n    let textOffsetY = 0;\n    let svg = ``;\n    if (node.borderType === \"Box\") {\n        // 四角形のボックス\n        contentWidth += options.boxPadding.left + options.boxPadding.right;\n        contentHeight += options.boxPadding.top + options.boxPadding.bottom;\n        textOffsetY += options.boxPadding.top;\n        const fillColor = options.backgroundColor ?? \"none\";\n        svg += `<rect x=\"0\" y=\"0\" width=\"${contentWidth.toFixed(1)}\" height=\"${contentHeight.toFixed(1)}\" `;\n        svg += `stroke=\"${options.strokeColor}\" stroke-width=\"${options.strokeWidth}\" `;\n        svg += `fill=\"${fillColor}\"/>`;\n    } else if (node.borderType === \"WRound\") {\n        // 丸みを帯びた四角形\n        contentHeight += options.boxPadding.top + options.boxPadding.bottom;\n        textOffsetY += options.boxPadding.top;\n        const radius = contentHeight / 2; // 高さの半分を丸みの半径とする\n        contentWidth += contentHeight;\n        textOffsetX = radius;\n        const fillColor = options.backgroundColor ?? \"none\";\n        svg += `<rect x=\"0\" y=\"0\" width=\"${contentWidth.toFixed(1)}\" height=\"${contentHeight.toFixed(1)}\" `;\n        svg += `rx=\"${radius.toFixed(1)}\" ry=\"${radius.toFixed(1)}\" `;\n        svg += `stroke=\"${options.strokeColor}\" stroke-width=\"${options.strokeWidth}\" `;\n        svg += `fill=\"${fillColor}\"/>`;\n    } else // ボーダーなし\n    contentWidth += options.boxPadding.left + options.boxPadding.right;\n    if (node.drawLeftBar) // 左側二重線\n    svg += $6b098df580cc3f14$var$renderLineSvg(options.doubleLineWidth, 0, options.doubleLineWidth, contentHeight, options);\n    if (node.drawRightBar) // 右側二重線\n    svg += $6b098df580cc3f14$var$renderLineSvg(contentWidth - options.doubleLineWidth, 0, contentWidth - options.doubleLineWidth, contentHeight, options);\n    svg += $6b098df580cc3f14$var$renderTextSvg(node.text, textOffsetX, textOffsetY, options);\n    let childFragment = null;\n    if (node.childNode) {\n        childFragment = $6b098df580cc3f14$var$renderNode(node.childNode, options);\n        svg += $6b098df580cc3f14$var$renderTransformTranslateSvg(options.childNodeOffsetWidth + contentWidth, 0, childFragment.svg);\n        svg += $6b098df580cc3f14$var$renderLineSvg(contentWidth, 0, options.childNodeOffsetWidth + contentWidth, 0, options);\n    }\n    const totalWidth = parseFloat((contentWidth + (childFragment ? childFragment.width + options.childNodeOffsetWidth : 0)).toFixed(1));\n    const totalHeight = parseFloat(Math.max(contentHeight, childFragment ? childFragment.height : 0).toFixed(1));\n    return {\n        svg: svg,\n        width: totalWidth,\n        height: totalHeight,\n        type: node.type\n    };\n}\n/**\n * コメントノードの描画\n */ function $6b098df580cc3f14$var$renderCommentFragment(node, options) {\n    const boxNode = {\n        type: \"Comment\",\n        text: `(${node.text})`,\n        childNode: null,\n        borderType: \"None\",\n        drawLeftBar: false,\n        drawRightBar: false\n    };\n    return $6b098df580cc3f14$var$renderBoxFragment(boxNode, options);\n}\n/**\n * ループノードの描画\n */ function $6b098df580cc3f14$var$renderLoopFragment(node, options) {\n    const boxNode = {\n        type: \"Loop\",\n        text: node.text,\n        childNode: node.childNode,\n        borderType: \"Box\",\n        drawLeftBar: node.isWhile,\n        drawRightBar: !node.isWhile\n    };\n    return $6b098df580cc3f14$var$renderBoxFragment(boxNode, options);\n}\n/**\n * 呼び出しノードの描画\n */ function $6b098df580cc3f14$var$renderCallFragment(node, options) {\n    const boxNode = {\n        type: \"Call\",\n        text: node.text,\n        childNode: node.childNode,\n        borderType: \"Box\",\n        drawLeftBar: true,\n        drawRightBar: true\n    };\n    return $6b098df580cc3f14$var$renderBoxFragment(boxNode, options);\n}\n/**\n * 処理ノードの描画\n */ function $6b098df580cc3f14$var$renderProcessFragment(node, options) {\n    const boxNode = {\n        type: \"Process\",\n        text: node.text,\n        childNode: node.childNode,\n        borderType: \"Box\",\n        drawLeftBar: false,\n        drawRightBar: false\n    };\n    return $6b098df580cc3f14$var$renderBoxFragment(boxNode, options);\n}\n/**\n * 端子ノードの描画\n */ function $6b098df580cc3f14$var$renderTerminalFragment(node, options) {\n    const boxNode = {\n        type: \"Terminal\",\n        text: node.text,\n        childNode: null,\n        borderType: \"WRound\",\n        drawLeftBar: false,\n        drawRightBar: false\n    };\n    return $6b098df580cc3f14$var$renderBoxFragment(boxNode, options);\n}\n// == Branchノードの描画関数群 ===\nfunction $6b098df580cc3f14$var$measureTextSvgForBranche(text, options) {\n    const textMetrics = $6b098df580cc3f14$var$measureTextSvg(text, options);\n    return {\n        width: textMetrics.width + options.branchePadding.left + options.branchePadding.right,\n        height: textMetrics.height + options.branchePadding.top + options.branchePadding.bottom\n    };\n}\nfunction $6b098df580cc3f14$var$renderTextSvgForBranche(text, posX, posY, options) {\n    return $6b098df580cc3f14$var$renderTextSvg(text, posX + options.branchePadding.left, posY + options.branchePadding.top, options);\n}\n/**\n * 分岐ノードの描画\n */ function $6b098df580cc3f14$var$renderBrancheFragment(node, options) {\n    // ケースの数が2未満の場合はダミーを追加する\n    if (node.branches.length < 2) while(node.branches.length < 2)node.branches.push({\n        label: \"\",\n        node: null\n    });\n    let svg = \"\";\n    const conditionSize = $6b098df580cc3f14$var$measureTextSvgForBranche(node.text, options);\n    const minHeight = conditionSize.height;\n    const x = 0;\n    const y = 0;\n    // labelw　<- ラベルの最大幅\n    // h <- ラベルと、サブビューの合計値\n    // subview <- サブビューの最大幅\n    let labelw = 0;\n    let subvieww = 0;\n    let h = 0;\n    let count = 0;\n    let lastdy = 0;\n    let lastldy = 0;\n    const brancheFragments = [];\n    const ymap = new Map();\n    for (const [index, branche] of node.branches.entries()){\n        const label = branche.label;\n        const labelSize = $6b098df580cc3f14$var$measureTextSvgForBranche(label, options);\n        const brancheFragment = branche.node ? $6b098df580cc3f14$var$renderNode(branche.node, options) : null;\n        // サブビューがない場合はサイズ = 0\n        const subViewSize = brancheFragment ? {\n            width: brancheFragment.width,\n            height: brancheFragment.height\n        } : {\n            width: 0,\n            height: 0\n        };\n        if (count !== node.branches.length - 1) subViewSize.height += options.nodeListSpace;\n        brancheFragments.push({\n            label: label,\n            fragment: brancheFragment\n        });\n        // ラベルの最大幅を更新\n        if (labelw < labelSize.width) labelw = labelSize.width;\n        // サブビューの最大幅を更新\n        if (subvieww < subViewSize.width) subvieww = subViewSize.width;\n        // ラベルに合わせて高さを更新\n        let uply, bottomly;\n        if (count === 0) {\n            uply = 0;\n            bottomly = labelSize.height;\n        } else if (count === node.branches.length - 1) {\n            uply = labelSize.height;\n            bottomly = 0;\n        } else {\n            uply = parseFloat((labelSize.height / 2).toFixed(1));\n            bottomly = uply;\n        }\n        if (lastdy < uply) lastdy = parseFloat((lastdy + uply - lastdy).toFixed(1));\n        // ラベルが縦長い場合に調整\n        const minldy = parseFloat((lastldy > uply ? lastldy * 2 : uply * 2).toFixed(1));\n        lastldy = bottomly;\n        if (minldy > lastdy) lastdy = minldy;\n        // 高さを更新\n        h = parseFloat((h + lastdy).toFixed(1));\n        ymap.set(index, h);\n        // tmp <- 高さ追記分\n        if (bottomly > subViewSize.height) lastdy = bottomly;\n        else lastdy = subViewSize.height;\n        if (lastdy < minHeight && count < node.branches.length - 1) lastdy = minHeight;\n        count += 1;\n    }\n    h = parseFloat((h + lastdy).toFixed(1));\n    // 描画\n    /**\n   * A-----B1\n   * |    /\n   * |   C2\n   * |    \\\n   * |     B2\n   * |    /\n   * |   C3\n   * |    \\\n   * E-----B3\n   */ let first = true;\n    let addChildLineWidth = false;\n    const poly = [];\n    let lasty = 0;\n    const boxRight = parseFloat((x + conditionSize.width + labelw + options.switchNodeCaseWidth).toFixed(1));\n    poly.push({\n        x: x,\n        y: y\n    }); // Pos:A\n    for (const [index, brancheFragment] of brancheFragments.entries()){\n        const lh_temp = ymap.get(index);\n        const lh = lh_temp ? lh_temp : 0;\n        const ly = parseFloat((y + lh).toFixed(1));\n        if (brancheFragment.fragment !== null) {\n            // brancheFragment.fragment の描画\n            svg += $6b098df580cc3f14$var$renderTransformTranslateSvg(parseFloat((boxRight + options.childNodeOffsetWidth).toFixed(1)), ly, brancheFragment.fragment.svg);\n            // 小要素への line の描画\n            svg += $6b098df580cc3f14$var$renderLineSvg(boxRight, ly, parseFloat((boxRight + options.childNodeOffsetWidth).toFixed(1)), ly, options);\n            // 小要素への line の分、最後に返す幅を増やす\n            addChildLineWidth = true;\n        }\n        if (!first) // Pos:C\n        poly.push({\n            x: parseFloat((boxRight - options.switchNodeCaseWidth).toFixed(1)),\n            y: parseFloat(((lasty + ly) / 2).toFixed(1))\n        });\n        poly.push({\n            x: boxRight,\n            y: ly\n        }); // Pos:B\n        first = false;\n        lasty = ly;\n    }\n    poly.push({\n        x: x,\n        y: parseFloat(lasty.toFixed(1))\n    }); // Pos:E\n    const polyPoints = poly.map((p)=>`${p.x.toFixed(1)},${p.y.toFixed(1)}`).join(\" \");\n    // polyの描画\n    const fillColor = options.backgroundColor ?? \"none\";\n    svg += `<polygon points=\"${polyPoints}\" `;\n    svg += `stroke=\"${options.strokeColor}\" `;\n    svg += `stroke-width=\"${options.strokeWidth}\" `;\n    svg += `fill=\"${fillColor}\"/>`;\n    for (const [index, brancheFragment] of brancheFragments.entries()){\n        const label = brancheFragment.label;\n        const lh_temp = ymap.get(index);\n        const lh = lh_temp ? lh_temp : 0;\n        let ly = parseFloat((y + lh).toFixed(1));\n        const ls = $6b098df580cc3f14$var$measureTextSvgForBranche(label, options);\n        if (index >= node.branches.length - 1) ly = parseFloat((ly - ls.height).toFixed(1));\n        else if (index > 0) ly = parseFloat((ly - ls.height / 2).toFixed(1));\n        // label の描画\n        svg += $6b098df580cc3f14$var$renderTextSvgForBranche(label, parseFloat((x + conditionSize.width + labelw - ls.width).toFixed(1)), ly, options);\n    }\n    // node.text の描画\n    svg += $6b098df580cc3f14$var$renderTextSvgForBranche(node.text, parseFloat(x.toFixed(1)), parseFloat((lasty / 2 - conditionSize.height / 2).toFixed(1)), options);\n    return {\n        svg: svg,\n        width: parseFloat((boxRight + subvieww + (addChildLineWidth ? options.childNodeOffsetWidth : 0)).toFixed(1)),\n        height: parseFloat(h.toFixed(1)),\n        type: node.type\n    };\n}\n/**\n * SWITCH分岐ノードの描画\n */ function $6b098df580cc3f14$var$renderSwitchFragment(node, options) {\n    const switchBrancheNode = {\n        text: node.text,\n        type: \"Switch\",\n        branches: []\n    };\n    for (const [label, caseNode] of node.cases.entries())switchBrancheNode.branches.push({\n        label: label.toString(),\n        node: caseNode\n    });\n    return $6b098df580cc3f14$var$renderBrancheFragment(switchBrancheNode, options);\n}\n/**\n * IF分岐ノードの描画\n */ function $6b098df580cc3f14$var$renderIfFragment(node, options) {\n    const ifBrancheNode = {\n        text: node.text,\n        type: \"If\",\n        branches: []\n    };\n    if (node.trueNode) ifBrancheNode.branches.push({\n        label: \"\",\n        node: node.trueNode\n    });\n    else ifBrancheNode.branches.push({\n        label: \"\",\n        node: null\n    });\n    if (node.falseNode) ifBrancheNode.branches.push({\n        label: \"\",\n        node: node.falseNode\n    });\n    else ifBrancheNode.branches.push({\n        label: \"\",\n        node: null\n    });\n    return $6b098df580cc3f14$var$renderBrancheFragment(ifBrancheNode, options);\n}\n// == ノード間の接続線の描画関数群 ===\n/**\n * 連結ノード（NodeListNode）の描画\n */ function $6b098df580cc3f14$var$renderListFragment(node, options) {\n    if (options.listRenderType === \"TerminalOffset\") return $6b098df580cc3f14$var$renderListFragmentTerminalOffset(node, options);\n    else return $6b098df580cc3f14$var$renderListFragmentOriginal(node, options);\n}\nfunction $6b098df580cc3f14$var$renderListFragmentOriginal(node, options) {\n    let totalHeight = 0;\n    let maxWidth = 0;\n    let currentY = 0;\n    let childrenSvg = \"\";\n    const childFragments = [];\n    // 子ノードを再帰的に描画し、サイズとSVGを収集\n    for (const child of node.children){\n        const childFragment = $6b098df580cc3f14$var$renderNode(child, options);\n        childFragments.push(childFragment);\n        totalHeight = parseFloat((totalHeight + childFragment.height).toFixed(1));\n        maxWidth = parseFloat(Math.max(maxWidth, childFragment.width).toFixed(1));\n    }\n    // 子ノードのSVGを配置し、接続線を描画\n    for(let i = 0; i < childFragments.length; i++){\n        const childFragment = childFragments[i];\n        // const xOffset = (maxWidth - childFragment.width) / 2; // 中央揃え\n        childrenSvg += $6b098df580cc3f14$var$renderTransformTranslateSvg(0, currentY, childFragment.svg);\n        // 接続線を描画 (最後のノード以外)\n        if (i < childFragments.length - 1) {\n            let startY = 0;\n            let endY = 0;\n            if (childFragment.type === \"Terminal\") startY = parseFloat((currentY + childFragment.height / 2).toFixed(1));\n            else startY = parseFloat(currentY.toFixed(1));\n            if (childFragments[i + 1].type === \"Terminal\") endY = parseFloat((currentY + childFragment.height + options.nodeListSpace + childFragments[i + 1].height / 2).toFixed(1));\n            else endY = parseFloat((currentY + childFragment.height + options.nodeListSpace + childFragments[i + 1].height).toFixed(1));\n            childrenSvg += $6b098df580cc3f14$var$renderLineSvg(0, startY, 0, endY, options);\n            totalHeight = parseFloat((totalHeight + options.nodeListSpace).toFixed(1));\n        }\n        currentY = parseFloat((currentY + childFragment.height + options.nodeListSpace).toFixed(1));\n    }\n    return {\n        svg: childrenSvg,\n        width: maxWidth,\n        height: totalHeight,\n        type: \"NodeList\"\n    };\n}\nfunction $6b098df580cc3f14$var$renderListFragmentTerminalOffset(node, options) {\n    let totalHeight = 0;\n    let maxWidth = 0;\n    let offsetX = 0;\n    let topAddWidth = 0;\n    let bottomAddWidth = 0;\n    let currentY = 0;\n    let childrenSvg = \"\";\n    const childFragments = [];\n    // 子ノードを再帰的に描画し、サイズとSVGを収集\n    for (const child of node.children){\n        const childFragment = $6b098df580cc3f14$var$renderNode(child, options);\n        childFragments.push(childFragment);\n        totalHeight = parseFloat((totalHeight + childFragment.height).toFixed(1));\n        maxWidth = parseFloat(Math.max(maxWidth, childFragment.width).toFixed(1));\n    }\n    const topChildFragment = childFragments[0];\n    if (topChildFragment.type === \"Terminal\") {\n        const topWidth = topChildFragment.width;\n        offsetX = parseFloat((topWidth / 2).toFixed(1));\n    }\n    const bottomChildFragment = childFragments[childFragments.length - 1];\n    if (bottomChildFragment.type === \"Terminal\") {\n        const bottomWidth = bottomChildFragment.width;\n        const bottomOffset = parseFloat((bottomWidth / 2).toFixed(1));\n        if (bottomOffset > offsetX) {\n            topAddWidth = parseFloat((bottomOffset - offsetX).toFixed(1));\n            offsetX = bottomOffset;\n        } else bottomAddWidth = parseFloat((offsetX - bottomOffset).toFixed(1));\n    }\n    // 子ノードのSVGを配置し、接続線を描画\n    for(let i = 0; i < childFragments.length; i++){\n        const childFragment = childFragments[i];\n        // const xOffset = (maxWidth - childFragment.width) / 2; // 中央揃え\n        if (i === 0) childrenSvg += $6b098df580cc3f14$var$renderTransformTranslateSvg(topAddWidth, currentY, childFragment.svg);\n        else if (i === childFragments.length - 1) childrenSvg += $6b098df580cc3f14$var$renderTransformTranslateSvg(bottomAddWidth, currentY, childFragment.svg);\n        else childrenSvg += $6b098df580cc3f14$var$renderTransformTranslateSvg(offsetX, currentY, childFragment.svg);\n        // 接続線を描画 (最後のノード以外)\n        if (i < childFragments.length - 1) {\n            let startY = 0;\n            let endY = 0;\n            if (childFragment.type === \"Terminal\") {\n                if (i === 0) startY = parseFloat((currentY + childFragment.height).toFixed(1));\n                else startY = parseFloat((currentY + childFragment.height / 2).toFixed(1));\n            } else startY = parseFloat(currentY.toFixed(1));\n            if (childFragments[i + 1].type === \"Terminal\") {\n                if (i + 1 === childFragments.length - 1) endY = parseFloat((currentY + childFragment.height + options.nodeListSpace).toFixed(1));\n                else endY = parseFloat((currentY + childFragment.height + options.nodeListSpace + childFragments[i + 1].height / 2).toFixed(1));\n            } else endY = parseFloat((currentY + childFragment.height + options.nodeListSpace + childFragments[i + 1].height).toFixed(1));\n            childrenSvg += $6b098df580cc3f14$var$renderLineSvg(offsetX, startY, offsetX, endY, options);\n            totalHeight = parseFloat((totalHeight + options.nodeListSpace).toFixed(1));\n        }\n        currentY = parseFloat((currentY + childFragment.height + options.nodeListSpace).toFixed(1));\n    }\n    return {\n        svg: childrenSvg,\n        width: parseFloat((maxWidth + offsetX).toFixed(1)),\n        height: totalHeight,\n        type: \"NodeList\"\n    };\n}\n// == テキスト処理 ==\n/**\n * テキストのサイズを概算するヘルパー関数。\n * 全角文字と半角文字を考慮してテキストの幅を計算します。\n */ function $6b098df580cc3f14$var$measureTextSvg(text, options) {\n    const lines = text.split(\"\\n\");\n    const maxWidth = Math.max(...lines.map((line)=>{\n        let width = 0;\n        width = $c197fae6480f2e77$exports.length(line) * options.fontSize / 2;\n        return width;\n    }));\n    const textHeight = lines.length * options.fontSize * options.lineHeight;\n    return {\n        width: maxWidth,\n        height: textHeight\n    };\n}\n/**\n * テキストをSVG形式で描画\n */ function $6b098df580cc3f14$var$renderTextSvg(text, posX, posY, options) {\n    const lines = text.split(\"\\n\");\n    let svg = \"\";\n    lines.forEach((line, index)=>{\n        const dy = index === 0 ? 0 : index * options.fontSize * options.lineHeight;\n        svg += `<text `;\n        svg += `x=\"${posX.toFixed(1)}\" y=\"${(posY + options.fontSize).toFixed(1)}\" dy=\"${dy.toFixed(1)}\" `;\n        svg += `font-family=\"${options.fontFamily}\" `;\n        svg += `font-size=\"${options.fontSize}\" `;\n        svg += `fill=\"${options.textColor}\">${line}</text>`;\n    });\n    return svg;\n}\n// == 描画支援 ==\n/**\n * line描画支援\n */ function $6b098df580cc3f14$var$renderLineSvg(x1, y1, x2, y2, options) {\n    return `<line\n\t\tx1=\"${x1.toFixed(1)}\" y1=\"${y1.toFixed(1)}\"\n\t\tx2=\"${x2.toFixed(1)}\" y2=\"${y2.toFixed(1)}\"\n\t\tstroke=\"${options.strokeColor}\"\n\t\tstroke-width=\"${options.strokeWidth}\"\n\t/>`;\n}\n/**\n * 描画位置オフセット支援\n */ function $6b098df580cc3f14$var$renderTransformTranslateSvg(x, y, childSvg) {\n    return `<g transform=\"translate(${x.toFixed(1)}, ${y.toFixed(1)})\">${childSvg}</g>`;\n}\n\n\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n    const spdInput = document.getElementById(\"spdInput\");\n    const svgOutput = document.getElementById(\"svgOutput\");\n    const fileInput = document.getElementById(\"fileInput\");\n    const downloadButton = document.getElementById(\"downloadButton\");\n    const downloadSvgButton = document.getElementById(\"downloadSvgButton\");\n    // Render Options\n    const fontSizeInput = document.getElementById(\"fontSizeInput\");\n    const baseBackgroundColorInput = document.getElementById(\"baseBackgroundColorInput\");\n    const transparentBackgroundCheckbox = document.getElementById(\"transparentBackgroundCheckbox\");\n    const backgroundColorInput = document.getElementById(\"backgroundColorInput\");\n    const transparentNodeBackgroundCheckbox = document.getElementById(\"transparentNodeBackgroundCheckbox\");\n    const textColorInput = document.getElementById(\"textColorInput\");\n    const listRenderTypeTerminalOffset = document.getElementById(\"listRenderTypeTerminalOffset\");\n    const applyOptionsButton = document.getElementById(\"applyOptionsButton\");\n    const convertAndRender = ()=>{\n        const spdText = spdInput.value;\n        try {\n            const ast = (0, $30ca700923f7cd7e$export$98e6a39c04603d36)(spdText);\n            const options = {\n                fontSize: parseInt(fontSizeInput.value, 10),\n                baseBackgroundColor: transparentBackgroundCheckbox.checked ? null : baseBackgroundColorInput.value,\n                backgroundColor: transparentNodeBackgroundCheckbox.checked ? null : backgroundColorInput.value,\n                textColor: textColorInput.value,\n                listRenderType: listRenderTypeTerminalOffset.checked ? \"TerminalOffset\" : \"Original\"\n            };\n            const svgString = (0, $6b098df580cc3f14$export$b3890eb0ae9dca99)(ast, options);\n            svgOutput.innerHTML = svgString;\n        } catch (error) {\n            if (error instanceof Error) {\n                svgOutput.innerHTML = `<p style=\"color: red;\">Error: ${error.message}</p>`;\n                console.error(\"SPD conversion error:\", error);\n            } else {\n                svgOutput.innerHTML = `<p style=\"color: red;\">An unknown error occurred</p>`;\n                console.error(\"An unknown error occurred:\", error);\n            }\n        }\n    };\n    transparentBackgroundCheckbox.addEventListener(\"change\", ()=>{\n        baseBackgroundColorInput.disabled = transparentBackgroundCheckbox.checked;\n    });\n    transparentNodeBackgroundCheckbox.addEventListener(\"change\", ()=>{\n        backgroundColorInput.disabled = transparentNodeBackgroundCheckbox.checked;\n    });\n    spdInput.addEventListener(\"input\", convertAndRender);\n    applyOptionsButton.addEventListener(\"click\", convertAndRender);\n    spdInput.addEventListener(\"keydown\", (event)=>{\n        if (event.key === \"Tab\") {\n            event.preventDefault(); // デフォルトのTabキーの動作（フォーカス移動）をキャンセル\n            const start = spdInput.selectionStart;\n            const end = spdInput.selectionEnd;\n            // タブ文字を挿入\n            spdInput.value = spdInput.value.substring(0, start) + \"\t\" + spdInput.value.substring(end);\n            // カーソル位置をタブの直後に設定\n            spdInput.selectionStart = spdInput.selectionEnd = start + 1;\n            convertAndRender(); // タブ挿入後も変換を実行\n        }\n    });\n    fileInput.addEventListener(\"change\", (event)=>{\n        const file = event.target.files?.[0];\n        if (file) {\n            const reader = new FileReader();\n            reader.onload = (e)=>{\n                spdInput.value = e.target?.result;\n                convertAndRender(); // ファイル読み込み後も変換を実行\n            };\n            reader.readAsText(file);\n        }\n    });\n    downloadButton.addEventListener(\"click\", ()=>{\n        const spdText = spdInput.value;\n        let fileName = prompt(\"\\u30C0\\u30A6\\u30F3\\u30ED\\u30FC\\u30C9\\u3059\\u308B\\u30D5\\u30A1\\u30A4\\u30EB\\u540D\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044:\", \"edited_spd.spd\");\n        if (fileName === null) // ユーザーがキャンセルした場合\n        return;\n        // 拡張子がない場合は.spdを追加\n        if (!fileName.endsWith(\".spd\")) fileName += \".spd\";\n        const blob = new Blob([\n            spdText\n        ], {\n            type: \"text/plain\"\n        });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = fileName; // ユーザーが入力したファイル名を使用\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    });\n    downloadSvgButton.addEventListener(\"click\", ()=>{\n        const svgString = svgOutput.innerHTML;\n        if (!svgString) {\n            alert(\"SVG\\u304C\\u751F\\u6210\\u3055\\u308C\\u3066\\u3044\\u307E\\u305B\\u3093\\u3002\");\n            return;\n        }\n        let fileName = prompt(\"\\u30C0\\u30A6\\u30F3\\u30ED\\u30FC\\u30C9\\u3059\\u308BSVG\\u30D5\\u30A1\\u30A4\\u30EB\\u540D\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044:\", \"output.svg\");\n        if (fileName === null) // ユーザーがキャンセルした場合\n        return;\n        // 拡張子がない場合は.svgを追加\n        if (!fileName.endsWith(\".svg\")) fileName += \".svg\";\n        const blob = new Blob([\n            svgString\n        ], {\n            type: \"image/svg+xml\"\n        });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = fileName;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    });\n    // 初期表示用のサンプルSPDテキスト\n    spdInput.value = `:terminal \\u{958B}\\u{59CB}\n\\u{547D}\\u{4EE4}\n:comment \\u{30B3}\\u{30E1}\\u{30F3}\\u{30C8}\\u{6587}\n:call \\u{95A2}\\u{6570}\\u{547C}\\u{3073}\\u{51FA}\\u{3057}\n\t\\u{4E2D}\\u{8EAB}\n:if \\u{6761}\\u{4EF6}\\u{5F0F}\n\t\\u{771F}\\u{306E}\\u{5834}\\u{5408}\n:else\n\t\\u{507D}\\u{306E}\\u{5834}\\u{5408}(:else\\u{4EE5}\\u{4E0B}\\u{306F}\\u{7701}\\u{7565}\\u{53EF}\\u{80FD})\n:switch \\u{6761}\\u{4EF6}\n:case \\u{30B1}\\u{30FC}\\u{30B9}1\n\t\\u{30B1}\\u{30FC}\\u{30B9}1\\u{306E}\\u{4E2D}\\u{8EAB}\n:case \\u{30B1}\\u{30FC}\\u{30B9}2\n\t\\u{30B1}\\u{30FC}\\u{30B9}2\\u{306E}\\u{4E2D}\\u{8EAB}\n:case ...\n\t\\u{30B1}\\u{30FC}\\u{30B9}\\u{6587}\\u{306F}\\u{5FC5}\\u{8981}\\u{306B}\\u{5FDC}\\u{3058}\\u{3066}\\u{3044}\\u{304F}\\u{3064}\\u{3067}\\u{3082}\\u{8FFD}\\u{52A0}\\u{3067}\\u{304D}\\u{307E}\\u{3059}\n:while \\u{7E70}\\u{308A}\\u{8FD4}\\u{3057}\\u{6761}\\u{4EF6}\\u{FF08}\\u{5148}\\u{5224}\\u{5B9A}\\u{FF09}\n\t\\u{4E2D}\\u{8EAB}\n:dowhile \\u{7E70}\\u{308A}\\u{8FD4}\\u{3057}\\u{6761}\\u{4EF6}\\u{FF08}\\u{5F8C}\\u{5224}\\u{5B9A}\\u{FF09}\n\t\\u{4E2D}\\u{8EAB}\n:terminal \\u{7D42}\\u{4E86}`;\n    convertAndRender(); // ページロード時に一度変換を実行\n});\n\n\n//# sourceMappingURL=web.e788ba1a.js.map\n","// web/src/main.ts\nimport { parse } from \"../../src/spd/parser\";\nimport { render as renderSvg } from \"../../src/spd/svg-renderer\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const spdInput = document.getElementById(\"spdInput\") as HTMLTextAreaElement;\n  const svgOutput = document.getElementById(\"svgOutput\") as HTMLDivElement;\n  const fileInput = document.getElementById(\"fileInput\") as HTMLInputElement;\n  const downloadButton = document.getElementById(\n    \"downloadButton\",\n  ) as HTMLButtonElement;\n  const downloadSvgButton = document.getElementById(\n    \"downloadSvgButton\",\n  ) as HTMLButtonElement;\n\n  // Render Options\n  const fontSizeInput = document.getElementById(\n    \"fontSizeInput\",\n  ) as HTMLInputElement;\n  const baseBackgroundColorInput = document.getElementById(\n    \"baseBackgroundColorInput\",\n  ) as HTMLInputElement;\n  const transparentBackgroundCheckbox = document.getElementById(\n    \"transparentBackgroundCheckbox\",\n  ) as HTMLInputElement;\n  const backgroundColorInput = document.getElementById(\n    \"backgroundColorInput\",\n  ) as HTMLInputElement;\n  const transparentNodeBackgroundCheckbox = document.getElementById(\n    \"transparentNodeBackgroundCheckbox\",\n  ) as HTMLInputElement;\n  const textColorInput = document.getElementById(\n    \"textColorInput\",\n  ) as HTMLInputElement;\n  const listRenderTypeTerminalOffset = document.getElementById(\n    \"listRenderTypeTerminalOffset\",\n  ) as HTMLInputElement;\n  const applyOptionsButton = document.getElementById(\n    \"applyOptionsButton\",\n  ) as HTMLButtonElement;\n\n  const convertAndRender = () => {\n    const spdText = spdInput.value;\n    try {\n      const ast = parse(spdText);\n      const options = {\n        fontSize: parseInt(fontSizeInput.value, 10),\n        baseBackgroundColor: transparentBackgroundCheckbox.checked\n          ? null\n          : baseBackgroundColorInput.value,\n        backgroundColor: transparentNodeBackgroundCheckbox.checked\n          ? null\n          : backgroundColorInput.value,\n        textColor: textColorInput.value,\n        listRenderType: listRenderTypeTerminalOffset.checked\n          ? \"TerminalOffset\"\n          : \"Original\",\n      };\n      const svgString = renderSvg(ast, options);\n      svgOutput.innerHTML = svgString;\n    } catch (error) {\n      if (error instanceof Error) {\n        svgOutput.innerHTML = `<p style=\"color: red;\">Error: ${error.message}</p>`;\n        console.error(\"SPD conversion error:\", error);\n      } else {\n        svgOutput.innerHTML = `<p style=\"color: red;\">An unknown error occurred</p>`;\n        console.error(\"An unknown error occurred:\", error);\n      }\n    }\n  };\n\n  transparentBackgroundCheckbox.addEventListener(\"change\", () => {\n    baseBackgroundColorInput.disabled = transparentBackgroundCheckbox.checked;\n  });\n\n  transparentNodeBackgroundCheckbox.addEventListener(\"change\", () => {\n    backgroundColorInput.disabled = transparentNodeBackgroundCheckbox.checked;\n  });\n\n  spdInput.addEventListener(\"input\", convertAndRender);\n  applyOptionsButton.addEventListener(\"click\", convertAndRender);\n\n  spdInput.addEventListener(\"keydown\", (event) => {\n    if (event.key === \"Tab\") {\n      event.preventDefault(); // デフォルトのTabキーの動作（フォーカス移動）をキャンセル\n      const start = spdInput.selectionStart;\n      const end = spdInput.selectionEnd;\n\n      // タブ文字を挿入\n      spdInput.value =\n        spdInput.value.substring(0, start) +\n        \"\t\" +\n        spdInput.value.substring(end);\n\n      // カーソル位置をタブの直後に設定\n      spdInput.selectionStart = spdInput.selectionEnd = start + 1;\n\n      convertAndRender(); // タブ挿入後も変換を実行\n    }\n  });\n\n  fileInput.addEventListener(\"change\", (event) => {\n    const file = (event.target as HTMLInputElement).files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        spdInput.value = e.target?.result as string;\n        convertAndRender(); // ファイル読み込み後も変換を実行\n      };\n      reader.readAsText(file);\n    }\n  });\n\n  downloadButton.addEventListener(\"click\", () => {\n    const spdText = spdInput.value;\n    let fileName = prompt(\n      \"ダウンロードするファイル名を入力してください:\",\n      \"edited_spd.spd\",\n    );\n\n    if (fileName === null) {\n      // ユーザーがキャンセルした場合\n      return;\n    }\n\n    // 拡張子がない場合は.spdを追加\n    if (!fileName.endsWith(\".spd\")) {\n      fileName += \".spd\";\n    }\n\n    const blob = new Blob([spdText], { type: \"text/plain\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = fileName; // ユーザーが入力したファイル名を使用\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  });\n\n  downloadSvgButton.addEventListener(\"click\", () => {\n    const svgString = svgOutput.innerHTML;\n    if (!svgString) {\n      alert(\"SVGが生成されていません。\");\n      return;\n    }\n\n    let fileName = prompt(\n      \"ダウンロードするSVGファイル名を入力してください:\",\n      \"output.svg\",\n    );\n\n    if (fileName === null) {\n      // ユーザーがキャンセルした場合\n      return;\n    }\n\n    // 拡張子がない場合は.svgを追加\n    if (!fileName.endsWith(\".svg\")) {\n      fileName += \".svg\";\n    }\n\n    const blob = new Blob([svgString], { type: \"image/svg+xml\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = fileName;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  });\n\n  // 初期表示用のサンプルSPDテキスト\n  spdInput.value = `:terminal 開始\n命令\n:comment コメント文\n:call 関数呼び出し\n\t中身\n:if 条件式\n\t真の場合\n:else\n\t偽の場合(:else以下は省略可能)\n:switch 条件\n:case ケース1\n\tケース1の中身\n:case ケース2\n\tケース2の中身\n:case ...\n\tケース文は必要に応じていくつでも追加できます\n:while 繰り返し条件（先判定）\n\t中身\n:dowhile 繰り返し条件（後判定）\n\t中身\n:terminal 終了`;\n  convertAndRender(); // ページロード時に一度変換を実行\n});\n","import type {\n  CallNode,\n  CommentNode,\n  IfNode,\n  LoopNode,\n  Node,\n  NodeListNode,\n  ProcessNode,\n  SwitchNode,\n  TerminalNode,\n} from \"./ast\";\n\n// カスタムエラークラス群\nexport class ParseError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = this.constructor.name;\n  }\n}\n// 引数が必要な場合にスローされる例外\nexport class RequireArgumentException extends ParseError {\n  constructor() {\n    super(\"このコマンドは引数が必要です\");\n  }\n}\n// 引数が不要な場合にスローされる例外\nexport class NotRequireArgumentException extends ParseError {\n  constructor() {\n    super(\"このコマンドに引数は不要です\");\n  }\n}\n// 不正なインデントの場合にスローされる例外\nexport class IllegalIndentException extends ParseError {\n  constructor() {\n    super(\"インデントの数が不正です\");\n  }\n}\n// 未知のコマンドの場合にスローされる例外\nexport class UnknownCommandException extends ParseError {\n  constructor() {\n    super(\"未知のコマンドです\");\n  }\n}\n// 予期しない:elseコマンドの場合にスローされる例外\nexport class UnexpectedElseException extends ParseError {\n  constructor() {\n    super(\"不適切なelseです\");\n  }\n}\n// 予期しない:caseコマンドの場合にスローされる例外\nexport class UnexpectedCaseException extends ParseError {\n  constructor() {\n    super(\"不適切なcaseが現れました\");\n  }\n}\n// :caseの値が重複している場合にスローされる例外\nexport class CaseDuplicateException extends ParseError {\n  constructor() {\n    super(\"既に同名のCaseが存在します\");\n  }\n}\n// 内部で予期しないエラーが発生した場合にスローされる例外\nexport class UnexpectedInnerException extends ParseError {\n  constructor(message: string) {\n    super(`内部エラー:${message}`);\n  }\n}\n// 予期しないI/Oエラーが発生した場合にスローされる例外\nexport class UnexpectedIOException extends ParseError {\n  constructor() {\n    super(\"予期しないIOエラーが発生しました\");\n  }\n}\n\ntype ParseErrorReceiverFunction = (\n  lineStr: string,\n  lineNo: number,\n  err: ParseError,\n) => boolean;\n\n/**\n * パース中のコンテキストを扱うクラス。\n */\nclass Context {\n  // 親のコンテキスト\n  parent: Context | null = null;\n  // 深さ\n  depth = 0;\n  // ノードリスト\n  nodeList: Node[] = [];\n  // コンテキストの追加状態\n  optionStatus: \"Default\" | \"Else\" = \"Default\";\n  // コンテキストの状態に結びつく引数\n  optionArg: string | null = null;\n}\n\n/**\n * SPD (Simple PAD Description) フォーマットのパーサー。\n */\n// コメントを判定する正規表現オブジェクト\nconst patternComment = /^\\s*(#.*)?$/;\n\nconst DummyParseErrorReceiver: ParseErrorReceiverFunction = (\n  // lineStr: string,\n  // lineNo: number,\n  // err: ParseError,\n): boolean => {\n  return false;\n};\n\n/**\n * 本文を処理する\n * @param context 現在のコンテキスト\n * @param body 本文\n */\nconst handleBody = (context: Context, body: string): void => {\n  // 状態の制御\n  if (context.nodeList.length > 0) {\n    const lnode = context.nodeList[context.nodeList.length - 1];\n    if (context.optionArg != null && lnode.type === \"switch\") {\n      const node: SwitchNode = lnode;\n      node.cases.set(context.optionArg, null);\n      context.optionArg = null;\n    }\n  }\n\n  if (body.startsWith(\":\")) {\n    const parts = body.split(/[ \\t]+/);\n\n    // コマンド部分と引数部分を分離\n    const cmd = parts[0].substring(1); // コマンド名（例: \"call\", \"if\"）\n    const arg =\n      parts.length > 1 ? body.substring(parts[0].length).trim() : null; // 引数\n\n    switch (cmd) {\n      case \"call\":\n        if (!arg) throw new RequireArgumentException();\n        context.nodeList.push({\n          type: \"call\",\n          text: arg,\n          childNode: null,\n        } as CallNode);\n        context.optionStatus = \"Default\";\n        context.optionArg = null;\n        break;\n      case \"terminal\":\n        if (!arg) throw new RequireArgumentException();\n        context.nodeList.push({\n          type: \"terminal\",\n          text: arg,\n        } as TerminalNode);\n        context.optionStatus = \"Default\";\n        context.optionArg = null;\n        break;\n      case \"comment\":\n        if (!arg) throw new RequireArgumentException();\n        context.nodeList.push({ type: \"comment\", text: arg } as CommentNode);\n        context.optionStatus = \"Default\";\n        context.optionArg = null;\n        break;\n      case \"while\":\n        if (!arg) throw new RequireArgumentException();\n        context.nodeList.push({\n          type: \"loop\",\n          isWhile: true,\n          text: arg,\n          childNode: null,\n        } as LoopNode);\n        context.optionStatus = \"Default\";\n        context.optionArg = null;\n        break;\n      case \"dowhile\":\n        if (!arg) throw new RequireArgumentException();\n        context.nodeList.push({\n          type: \"loop\",\n          isWhile: false,\n          text: arg,\n          childNode: null,\n        } as LoopNode);\n        context.optionStatus = \"Default\";\n        context.optionArg = null;\n        break;\n      case \"if\":\n        if (!arg) throw new RequireArgumentException();\n        context.nodeList.push({\n          type: \"if\",\n          text: arg,\n          trueNode: null,\n          falseNode: null,\n        } as IfNode);\n        context.optionStatus = \"Default\";\n        context.optionArg = null;\n        break;\n      case \"switch\":\n        if (!arg) throw new RequireArgumentException();\n        context.nodeList.push({\n          type: \"switch\",\n          text: arg,\n          cases: new Map<string, Node | null>(),\n        } as SwitchNode);\n        context.optionStatus = \"Default\";\n        context.optionArg = null;\n        break;\n      case \"else\": {\n        const lastIfNode =\n          context.nodeList.length === 0\n            ? null\n            : context.nodeList[context.nodeList.length - 1];\n        if (lastIfNode === null || lastIfNode.type !== \"if\") {\n          throw new UnexpectedElseException();\n        }\n        if (arg !== null) {\n          throw new NotRequireArgumentException();\n        }\n        context.optionStatus = \"Else\";\n        context.optionArg = null;\n        break;\n      }\n      case \"case\": {\n        const lastSwitchNode =\n          context.nodeList.length === 0\n            ? null\n            : context.nodeList[context.nodeList.length - 1];\n        if (lastSwitchNode === null || lastSwitchNode.type !== \"switch\") {\n          throw new UnexpectedCaseException();\n        }\n        if (!arg) throw new RequireArgumentException();\n        if (lastSwitchNode.cases.has(arg)) {\n          throw new CaseDuplicateException();\n        }\n        context.optionStatus = \"Default\";\n        context.optionArg = arg;\n        break;\n      }\n      default:\n        throw new UnknownCommandException();\n    }\n  } else {\n    context.nodeList.push({\n      type: \"process\",\n      text: body,\n      childNode: null,\n    } as ProcessNode);\n    context.optionStatus = \"Default\";\n    context.optionArg = null;\n  }\n};\n\n/**\n * 現在のコンテキストを確定し、親コンテキストに移動します。\n * @param context 現在のコンテキスト。\n * @returns 親コンテキスト。\n */\nconst upToParent = (context: Context | null): Context | null => {\n  if (context === null) return null;\n\n  // 状態の制御\n  if (context.nodeList.length > 0) {\n    const lnode = context.nodeList[context.nodeList.length - 1];\n    if (context.optionArg != null && lnode.type === \"switch\") {\n      const node: SwitchNode = lnode as SwitchNode;\n      node.cases.set(context.optionArg, null);\n      context.optionArg = null;\n    }\n  }\n\n  if (context.parent === null) return null;\n\n  // 追加するノードを新規作成。\n  let newNode: Node | NodeListNode | null = null;\n  if (context.nodeList.length === 0) {\n    return context.parent;\n  } else if (context.nodeList.length === 1) {\n    newNode = context.nodeList[0];\n  } else {\n    const nodeList = { type: \"nodeList\", children: [] } as NodeListNode;\n    for (let i = 0; i < context.nodeList.length; i++) {\n      nodeList.children.push(context.nodeList[i]);\n    }\n    newNode = nodeList;\n  }\n\n  // ノードの追加先となるノード。\n  const pnode = context.parent.nodeList[context.parent.nodeList.length - 1];\n\n  // ノードの種類に応じてノードの追加先に追加。\n  switch (pnode.type) {\n    case \"process\": {\n      const processNode = pnode as ProcessNode;\n      processNode.childNode = newNode;\n      break;\n    }\n    case \"loop\": {\n      const loopNode = pnode as LoopNode;\n      loopNode.childNode = newNode;\n      break;\n    }\n    case \"call\": {\n      const callNode = pnode as CallNode;\n      callNode.childNode = newNode;\n      break;\n    }\n    case \"switch\": {\n      const snode = pnode as SwitchNode;\n      if (context.parent.optionArg !== null) {\n        snode.cases.set(context.parent.optionArg, newNode);\n      } else {\n        throw new UnexpectedInnerException(\n          \"optionArg is null when it shouldn't be for switch node.\",\n        );\n      }\n      break;\n    }\n    case \"if\": {\n      const ifnode = pnode as IfNode;\n      if (context.parent.optionStatus === \"Default\") {\n        ifnode.trueNode = newNode;\n      } else if (context.parent.optionStatus === \"Else\") {\n        if (ifnode.falseNode !== null) {\n          throw new UnexpectedElseException();\n        } else {\n          ifnode.falseNode = newNode;\n        }\n      }\n      break;\n    }\n  }\n\n  // 親ノードの状態をリセットする。\n  context.parent.optionStatus = \"Default\";\n  context.parent.optionArg = null;\n\n  // 親ノードを返す。\n  return context.parent;\n};\n\n/**\n * SPDフォーマットの文字列をPADモデル（AST）にパースします。\n * @param src SPDフォーマットの文字列。\n * @returns パースされたASTのルートノード。\n */\nexport const parse = (\n  src: string,\n  exr: ParseErrorReceiverFunction = DummyParseErrorReceiver,\n): Node | null => {\n  // if(src == null) throw new IllegalArgumentException(\"src is null\"); // # diff TypeScriptではnullチェックは不要\n\n  // 先頭のコンテキスト\n  const rootContext = new Context();\n  // 現在のコンテキスト\n  let context: Context | null = rootContext;\n\n  // １行づつ読み込む\n  // ソースコードを行ごとに分割\n  const lines = src.split(/\\r?\\n/);\n  let lineNo = 0; // 現在の行番号\n\n  try {\n    while (lineNo < lines.length) {\n      const line = lines[lineNo];\n      lineNo++;\n\n      // コメント行は読み飛ばし\n      if (patternComment.test(line)) continue;\n\n      // 先頭のタブ数を数える。\n      let tabNum = 0;\n      for (let i = 0; i < line.length; ++i) {\n        if (line.charAt(i) === \"\\t\") {\n          tabNum++;\n        } else {\n          break;\n        }\n      }\n\n      try {\n        if (context === null) {\n          throw new IllegalIndentException();\n        }\n\n        // 子コンテキストの作成処理を行う。\n        if ((tabNum > 0 && context.nodeList.length === 0) || tabNum < 0) {\n          // 最初からタブがある場合は不正。\n          throw new IllegalIndentException();\n        }\n        if (tabNum > context.depth) {\n          // タブが増加した場合の処理\n\n          // 正当性をチェックする。\n          const parentNode = context.nodeList[context.nodeList.length - 1];\n          if (\n            tabNum > context.depth + 1 ||\n            (parentNode && parentNode.type === \"comment\")\n          ) {\n            // 親がコメントか２階層以上離れているのは不正。\n            throw new IllegalIndentException();\n          }\n          if (parentNode.type === \"switch\" && context.optionArg == null) {\n            // 子を持たないタイプの場合は不正。\n            throw new IllegalIndentException();\n          }\n\n          // 子コンテキストを生成する。\n          const newContext = new Context();\n          newContext.parent = context;\n          newContext.depth = context.depth + 1;\n          context = newContext;\n        }\n\n        // タブが減少した際の処理\n        while (tabNum < context.depth) {\n          context = upToParent(context);\n          if (context === null) {\n            throw new IllegalIndentException();\n          }\n        }\n\n        // 本文は行のデータをtrimしたものとする。\n        // 行末が @ の場合は複数行扱いとする。\n        let body = line.substring(tabNum); // タブの後の本体部分を抽出\n        if (body.endsWith(\"@\")) {\n          let multiLineContent = body.substring(0, body.length - 1);\n          while (lineNo < lines.length) {\n            const nextLine = lines[lineNo];\n            lineNo++;\n\n            // コメント行で止まる\n            if (patternComment.test(nextLine)) continue;\n\n            // 行末に @ が間読み込む\n            // 行末に @ がある間読み込む\n            let nextLineTabNum = 0;\n            for (let i = 0; i < nextLine.length; ++i) {\n              if (nextLine.charAt(i) === \"\\t\") {\n                nextLineTabNum++;\n              } else {\n                break;\n              }\n            }\n            const nextLineBody = nextLine.substring(nextLineTabNum);\n\n            if (nextLineBody.endsWith(\"@\")) {\n              multiLineContent += `\\n${nextLineBody.substring(0, nextLineBody.length - 1)}`;\n            } else {\n              multiLineContent += `\\n${nextLineBody}`;\n              break;\n            }\n          }\n          body = multiLineContent;\n        }\n        body = body.replace(/@/g, \"\\n\");\n\n        // 本文を処理する。\n        if (context !== null) {\n          handleBody(context, body);\n        } else {\n          throw new IllegalIndentException(); // contextがnullの場合、これは不正な状態を示す\n        }\n      } catch (ex) {\n        if (ex instanceof ParseError) {\n          if (exr(line, lineNo - 1, ex)) {\n          } else {\n            throw ex;\n          }\n        } else {\n          throw ex;\n        }\n      }\n    }\n\n    // 先頭まで戻る\n    while (context != null) {\n      context = upToParent(context);\n    }\n  } catch (ex) {\n    if (ex instanceof ParseError) {\n      throw ex; // テストと適切なエラーハンドリングのためにParseErrorを再スロー\n    } else {\n      console.error(`行 ${lineNo} で予期しないエラーが発生しました: ${ex}`);\n      throw new ParseError(`予期しないエラー: ${ex}`); // その他のエラーをラップ\n    }\n  }\n\n  // モデルを最終化して返す\n  if (rootContext.nodeList.length === 0) {\n    return null;\n  }\n  const topNode: NodeListNode = {\n    type: \"nodeList\",\n    children: rootContext.nodeList,\n  };\n  return topNode;\n};\n","import type {\n  CallNode,\n  CommentNode,\n  IfNode,\n  LoopNode,\n  Node,\n  NodeListNode,\n  ProcessNode,\n  SwitchNode,\n  TerminalNode,\n} from \"./ast\";\n\nimport * as eaw from \"eastasianwidth\";\n\ntype Branch = {\n  label: string;\n  node: Node | null;\n};\n\ntype BrancheNode = {\n  text: string;\n  type: \"If\" | \"Switch\";\n  branches: Branch[];\n};\n\ntype BoxNode = {\n  type: \"Comment\" | \"Process\" | \"Call\" | \"Loop\" | \"Terminal\";\n  text: string;\n  childNode: Node | null;\n  borderType: \"None\" | \"Box\" | \"WRound\";\n  drawLeftBar: boolean;\n  drawRightBar: boolean;\n};\n\n/**\n * 描画に関する設定をまとめたオブジェクト\n */\ninterface RenderOptions {\n  fontSize: number;\n  fontFamily: string;\n  margin: { top: number; right: number; bottom: number; left: number };\n  boxPadding: { top: number; right: number; bottom: number; left: number };\n  branchePadding: { top: number; right: number; bottom: number; left: number };\n  strokeWidth: number;\n  strokeColor: string;\n  backgroundColor: string | null;\n  baseBackgroundColor: string | null;\n  textColor: string;\n  lineHeight: number;\n  doubleLineWidth: number; // 二重線の幅\n  switchNodeCaseWidth: number; // 分岐記号のギザギザの幅\n  connectorWidth: number; // 子ノードとの接続線幅\n  nodeListSpace: number; // ノードListNodeの子ノード間のスペース\n  childNodeOffsetWidth: number;\n  listRenderType: string;\n}\n\n/**\n * 描画結果の中間表現\n * 各ノードを描画した結果、生成されるSVG文字列と、レイアウト計算に必要なサイズ情報を保持\n */\ninterface ViewFragment {\n  svg: string; // 生成されたSVG要素の文字列\n  width: number; // 全体の幅\n  height: number; // 全体の高さ\n  type:\n    | \"Process\"\n    | \"Terminal\"\n    | \"NodeList\"\n    | \"Call\"\n    | \"Loop\"\n    | \"If\"\n    | \"Switch\"\n    | \"Comment\"\n    | \"Unknown\"; // ノードのタイプ\n}\n\n// デフォルトの描画オプション\nconst defaultRenderOptions: RenderOptions = {\n  fontSize: 14,\n  fontFamily: \"sans-serif\",\n  margin: { top: 20, right: 20, bottom: 20, left: 20 },\n  boxPadding: { top: 10, right: 10, bottom: 10, left: 10 },\n  branchePadding: { top: 5, right: 5, bottom: 5, left: 5 },\n  strokeWidth: 1,\n  strokeColor: \"#000000\",\n  backgroundColor: \"#ffffff\",\n  baseBackgroundColor: null,\n  textColor: \"#000000\",\n  lineHeight: 1.2,\n  doubleLineWidth: 5,\n  switchNodeCaseWidth: 20,\n  connectorWidth: 2,\n  nodeListSpace: 10,\n  childNodeOffsetWidth: 20,\n  listRenderType: \"original\",\n};\n\n/**\n * ASTを受け取り、完全なSVG文字列を返す\n */\nexport function render(\n  node: Node | null,\n  options?: Partial<RenderOptions>,\n): string {\n  const mergedOptions: RenderOptions = { ...defaultRenderOptions, ...options };\n\n  if (!node) {\n    return \"\";\n  }\n\n  const fragment = renderNode(node, mergedOptions);\n\n  const svgWidth =\n    fragment.width + mergedOptions.margin.left + mergedOptions.margin.right;\n  const svgHeight =\n    fragment.height + mergedOptions.margin.top + mergedOptions.margin.bottom;\n\n  let svg = `<svg `;\n  svg += `width=\"${svgWidth.toFixed(1)}\" height=\"${svgHeight.toFixed(1)}\" `;\n  svg += `viewBox=\"0 0 ${svgWidth.toFixed(1)} ${svgHeight.toFixed(1)}\" `;\n  svg += `xmlns=\"http://www.w3.org/2000/svg\">`;\n  const baseFillColor = mergedOptions.baseBackgroundColor ?? \"none\";\n  svg += `<rect x=\"0\" y=\"0\" `;\n  svg += `width=\"${svgWidth.toFixed(1)}\" height=\"${svgHeight.toFixed(1)}\" `;\n  svg += `fill=\"${baseFillColor}\"/>`;\n  svg += renderTransformTranslateSvg(\n    mergedOptions.margin.left,\n    mergedOptions.margin.top,\n    fragment.svg,\n  );\n  svg += `</svg>`;\n\n  return svg;\n}\n\n/**\n * ASTのノード種別に応じて、対応する描画関数を呼び出す\n */\nfunction renderNode(node: Node, options: RenderOptions): ViewFragment {\n  switch (node.type) {\n    case \"process\":\n      return renderProcessFragment(node, options);\n    case \"terminal\":\n      return renderTerminalFragment(node, options);\n    case \"nodeList\":\n      return renderListFragment(node, options);\n    case \"call\":\n      return renderCallFragment(node, options);\n    case \"loop\":\n      return renderLoopFragment(node, options);\n    case \"if\":\n      return renderIfFragment(node, options);\n    case \"switch\":\n      return renderSwitchFragment(node, options);\n    case \"comment\":\n      return renderCommentFragment(node, options);\n    // 他のノードタイプは後で追加\n    default:\n      return { svg: \"\", width: 0, height: 0, type: \"Unknown\" }; // 未実装のノードタイプ\n  }\n}\n\n/**\n * 箱型ノードの描画処理\n */\nfunction renderBoxFragment(\n  node: BoxNode,\n  options: RenderOptions,\n): ViewFragment {\n  const textMetrics = measureTextSvg(node.text, options);\n  let contentWidth = textMetrics.width;\n  let contentHeight = textMetrics.height;\n  let textOffsetX = options.boxPadding.left;\n  let textOffsetY = 0;\n\n  let svg = ``;\n\n  if (node.borderType === \"Box\") {\n    // 四角形のボックス\n    contentWidth += options.boxPadding.left + options.boxPadding.right;\n    contentHeight += options.boxPadding.top + options.boxPadding.bottom;\n    textOffsetY += options.boxPadding.top;\n    const fillColor = options.backgroundColor ?? \"none\";\n    svg += `<rect x=\"0\" y=\"0\" width=\"${contentWidth.toFixed(1)}\" height=\"${contentHeight.toFixed(1)}\" `;\n    svg += `stroke=\"${options.strokeColor}\" stroke-width=\"${options.strokeWidth}\" `;\n    svg += `fill=\"${fillColor}\"/>`;\n  } else if (node.borderType === \"WRound\") {\n    // 丸みを帯びた四角形\n    contentHeight += options.boxPadding.top + options.boxPadding.bottom;\n    textOffsetY += options.boxPadding.top;\n    const radius = contentHeight / 2; // 高さの半分を丸みの半径とする\n    contentWidth += contentHeight;\n    textOffsetX = radius;\n    const fillColor = options.backgroundColor ?? \"none\";\n    svg += `<rect x=\"0\" y=\"0\" width=\"${contentWidth.toFixed(1)}\" height=\"${contentHeight.toFixed(1)}\" `;\n    svg += `rx=\"${radius.toFixed(1)}\" ry=\"${radius.toFixed(1)}\" `;\n    svg += `stroke=\"${options.strokeColor}\" stroke-width=\"${options.strokeWidth}\" `;\n    svg += `fill=\"${fillColor}\"/>`;\n  } else {\n    // ボーダーなし\n    contentWidth += options.boxPadding.left + options.boxPadding.right;\n  }\n\n  if (node.drawLeftBar) {\n    // 左側二重線\n    svg += renderLineSvg(\n      options.doubleLineWidth,\n      0,\n      options.doubleLineWidth,\n      contentHeight,\n      options,\n    );\n  }\n  if (node.drawRightBar) {\n    // 右側二重線\n    svg += renderLineSvg(\n      contentWidth - options.doubleLineWidth,\n      0,\n      contentWidth - options.doubleLineWidth,\n      contentHeight,\n      options,\n    );\n  }\n\n  svg += renderTextSvg(node.text, textOffsetX, textOffsetY, options);\n\n  let childFragment: ViewFragment | null = null;\n  if (node.childNode) {\n    childFragment = renderNode(node.childNode, options);\n    svg += renderTransformTranslateSvg(\n      options.childNodeOffsetWidth + contentWidth,\n      0,\n      childFragment.svg,\n    );\n    svg += renderLineSvg(\n      contentWidth,\n      0,\n      options.childNodeOffsetWidth + contentWidth,\n      0,\n      options,\n    );\n  }\n  const totalWidth = parseFloat(\n    (\n      contentWidth +\n      (childFragment ? childFragment.width + options.childNodeOffsetWidth : 0)\n    ).toFixed(1),\n  );\n  const totalHeight = parseFloat(\n    Math.max(contentHeight, childFragment ? childFragment.height : 0).toFixed(\n      1,\n    ),\n  );\n\n  return {\n    svg: svg,\n    width: totalWidth,\n    height: totalHeight,\n    type: node.type,\n  };\n}\n\n/**\n * コメントノードの描画\n */\nfunction renderCommentFragment(\n  node: CommentNode,\n  options: RenderOptions,\n): ViewFragment {\n  const boxNode: BoxNode = {\n    type: \"Comment\",\n    text: `(${node.text})`,\n    childNode: null,\n    borderType: \"None\",\n    drawLeftBar: false,\n    drawRightBar: false,\n  };\n  return renderBoxFragment(boxNode, options);\n}\n\n/**\n * ループノードの描画\n */\nfunction renderLoopFragment(\n  node: LoopNode,\n  options: RenderOptions,\n): ViewFragment {\n  const boxNode: BoxNode = {\n    type: \"Loop\",\n    text: node.text,\n    childNode: node.childNode,\n    borderType: \"Box\",\n    drawLeftBar: node.isWhile, // Whileループは左側に二重線を描画\n    drawRightBar: !node.isWhile, // Do-Whileループは右側に二重線を描画\n  };\n  return renderBoxFragment(boxNode, options);\n}\n\n/**\n * 呼び出しノードの描画\n */\nfunction renderCallFragment(\n  node: CallNode,\n  options: RenderOptions,\n): ViewFragment {\n  const boxNode: BoxNode = {\n    type: \"Call\",\n    text: node.text,\n    childNode: node.childNode,\n    borderType: \"Box\",\n    drawLeftBar: true,\n    drawRightBar: true,\n  };\n  return renderBoxFragment(boxNode, options);\n}\n\n/**\n * 処理ノードの描画\n */\nfunction renderProcessFragment(\n  node: ProcessNode,\n  options: RenderOptions,\n): ViewFragment {\n  const boxNode: BoxNode = {\n    type: \"Process\",\n    text: node.text,\n    childNode: node.childNode,\n    borderType: \"Box\",\n    drawLeftBar: false,\n    drawRightBar: false,\n  };\n  return renderBoxFragment(boxNode, options);\n}\n\n/**\n * 端子ノードの描画\n */\nfunction renderTerminalFragment(\n  node: TerminalNode,\n  options: RenderOptions,\n): ViewFragment {\n  const boxNode: BoxNode = {\n    type: \"Terminal\",\n    text: node.text,\n    childNode: null,\n    borderType: \"WRound\",\n    drawLeftBar: false,\n    drawRightBar: false,\n  };\n  return renderBoxFragment(boxNode, options);\n}\n\n// == Branchノードの描画関数群 ===\n\nfunction measureTextSvgForBranche(\n  text: string,\n  options: RenderOptions,\n): { width: number; height: number } {\n  const textMetrics = measureTextSvg(text, options);\n  return {\n    width:\n      textMetrics.width +\n      options.branchePadding.left +\n      options.branchePadding.right,\n    height:\n      textMetrics.height +\n      options.branchePadding.top +\n      options.branchePadding.bottom,\n  };\n}\n\nfunction renderTextSvgForBranche(\n  text: string,\n  posX: number,\n  posY: number,\n  options: RenderOptions,\n): string {\n  return renderTextSvg(\n    text,\n    posX + options.branchePadding.left,\n    posY + options.branchePadding.top,\n    options,\n  );\n}\n\n/**\n * 分岐ノードの描画\n */\nfunction renderBrancheFragment(\n  node: BrancheNode,\n  options: RenderOptions,\n): ViewFragment {\n  // ケースの数が2未満の場合はダミーを追加する\n  if (node.branches.length < 2) {\n    while (node.branches.length < 2) {\n      node.branches.push({ label: \"\", node: null });\n    }\n  }\n\n  let svg = \"\";\n\n  const conditionSize = measureTextSvgForBranche(node.text, options);\n  const minHeight = conditionSize.height;\n\n  const x = 0;\n  const y = 0;\n\n  // labelw　<- ラベルの最大幅\n  // h <- ラベルと、サブビューの合計値\n  // subview <- サブビューの最大幅\n  let labelw = 0;\n  let subvieww = 0;\n  let h = 0;\n\n  let count = 0;\n  let lastdy = 0;\n  let lastldy = 0;\n  const brancheFragments: { label: string; fragment: ViewFragment | null }[] =\n    [];\n  const ymap = new Map<number, number>();\n  for (const [index, branche] of node.branches.entries()) {\n    const label = branche.label;\n    const labelSize = measureTextSvgForBranche(label, options);\n    const brancheFragment = branche.node\n      ? renderNode(branche.node, options)\n      : null;\n\n    // サブビューがない場合はサイズ = 0\n    const subViewSize = brancheFragment\n      ? { width: brancheFragment.width, height: brancheFragment.height }\n      : { width: 0, height: 0 };\n\n    if (count !== node.branches.length - 1) {\n      subViewSize.height += options.nodeListSpace;\n    }\n\n    brancheFragments.push({ label: label, fragment: brancheFragment });\n\n    // ラベルの最大幅を更新\n    if (labelw < labelSize.width) labelw = labelSize.width;\n\n    // サブビューの最大幅を更新\n    if (subvieww < subViewSize.width) subvieww = subViewSize.width;\n\n    // ラベルに合わせて高さを更新\n    let uply: number, bottomly: number;\n    if (count === 0) {\n      uply = 0;\n      bottomly = labelSize.height;\n    } else if (count === node.branches.length - 1) {\n      uply = labelSize.height;\n      bottomly = 0;\n    } else {\n      uply = parseFloat((labelSize.height / 2).toFixed(1));\n      bottomly = uply;\n    }\n    if (lastdy < uply) lastdy = parseFloat((lastdy + uply - lastdy).toFixed(1));\n\n    // ラベルが縦長い場合に調整\n    const minldy = parseFloat(\n      (lastldy > uply ? lastldy * 2 : uply * 2).toFixed(1),\n    );\n    lastldy = bottomly;\n    if (minldy > lastdy) lastdy = minldy;\n\n    // 高さを更新\n    h = parseFloat((h + lastdy).toFixed(1));\n    ymap.set(index, h);\n\n    // tmp <- 高さ追記分\n    if (bottomly > subViewSize.height) {\n      lastdy = bottomly;\n    } else {\n      lastdy = subViewSize.height;\n    }\n    if (lastdy < minHeight && count < node.branches.length - 1)\n      lastdy = minHeight;\n\n    count += 1;\n  }\n\n  h = parseFloat((h + lastdy).toFixed(1));\n\n  // 描画\n\n  /**\n   * A-----B1\n   * |    /\n   * |   C2\n   * |    \\\n   * |     B2\n   * |    /\n   * |   C3\n   * |    \\\n   * E-----B3\n   */\n  let first = true;\n  let addChildLineWidth = false;\n  const poly: { x: number; y: number }[] = [];\n  let lasty = 0;\n  const boxRight = parseFloat(\n    (x + conditionSize.width + labelw + options.switchNodeCaseWidth).toFixed(1),\n  );\n  poly.push({ x: x, y: y }); // Pos:A\n  for (const [index, brancheFragment] of brancheFragments.entries()) {\n    const lh_temp = ymap.get(index);\n    const lh = lh_temp ? lh_temp : 0;\n    const ly = parseFloat((y + lh).toFixed(1));\n\n    if (brancheFragment.fragment !== null) {\n      // brancheFragment.fragment の描画\n      svg += renderTransformTranslateSvg(\n        parseFloat((boxRight + options.childNodeOffsetWidth).toFixed(1)),\n        ly,\n        brancheFragment.fragment.svg,\n      );\n      // 小要素への line の描画\n      svg += renderLineSvg(\n        boxRight,\n        ly,\n        parseFloat((boxRight + options.childNodeOffsetWidth).toFixed(1)),\n        ly,\n        options,\n      );\n      // 小要素への line の分、最後に返す幅を増やす\n      addChildLineWidth = true;\n    }\n\n    if (!first) {\n      // Pos:C\n      poly.push({\n        x: parseFloat((boxRight - options.switchNodeCaseWidth).toFixed(1)),\n        y: parseFloat(((lasty + ly) / 2).toFixed(1)),\n      });\n    }\n    poly.push({ x: boxRight, y: ly }); // Pos:B\n    first = false;\n    lasty = ly;\n  }\n  poly.push({ x: x, y: parseFloat(lasty.toFixed(1)) }); // Pos:E\n\n  const polyPoints = poly\n    .map((p) => `${p.x.toFixed(1)},${p.y.toFixed(1)}`)\n    .join(\" \");\n\n  // polyの描画\n  const fillColor = options.backgroundColor ?? \"none\";\n  svg += `<polygon points=\"${polyPoints}\" `;\n  svg += `stroke=\"${options.strokeColor}\" `;\n  svg += `stroke-width=\"${options.strokeWidth}\" `;\n  svg += `fill=\"${fillColor}\"/>`;\n\n  for (const [index, brancheFragment] of brancheFragments.entries()) {\n    const label = brancheFragment.label;\n    const lh_temp = ymap.get(index);\n    const lh = lh_temp ? lh_temp : 0;\n    let ly = parseFloat((y + lh).toFixed(1));\n\n    const ls = measureTextSvgForBranche(label, options);\n\n    if (index >= node.branches.length - 1) {\n      ly = parseFloat((ly - ls.height).toFixed(1));\n    } else if (index > 0) {\n      ly = parseFloat((ly - ls.height / 2).toFixed(1));\n    }\n\n    // label の描画\n    svg += renderTextSvgForBranche(\n      label,\n      parseFloat((x + conditionSize.width + labelw - ls.width).toFixed(1)),\n      ly,\n      options,\n    );\n  }\n\n  // node.text の描画\n  svg += renderTextSvgForBranche(\n    node.text,\n    parseFloat(x.toFixed(1)),\n    parseFloat((lasty / 2 - conditionSize.height / 2).toFixed(1)),\n    options,\n  );\n\n  return {\n    svg: svg,\n    width: parseFloat(\n      (\n        boxRight +\n        subvieww +\n        (addChildLineWidth ? options.childNodeOffsetWidth : 0)\n      ).toFixed(1),\n    ),\n    height: parseFloat(h.toFixed(1)),\n    type: node.type,\n  };\n}\n\n/**\n * SWITCH分岐ノードの描画\n */\nfunction renderSwitchFragment(\n  node: SwitchNode,\n  options: RenderOptions,\n): ViewFragment {\n  const switchBrancheNode: BrancheNode = {\n    text: node.text,\n    type: \"Switch\",\n    branches: [],\n  };\n\n  for (const [label, caseNode] of node.cases.entries()) {\n    switchBrancheNode.branches.push({\n      label: label.toString(),\n      node: caseNode,\n    });\n  }\n\n  return renderBrancheFragment(switchBrancheNode, options);\n}\n\n/**\n * IF分岐ノードの描画\n */\nfunction renderIfFragment(node: IfNode, options: RenderOptions): ViewFragment {\n  const ifBrancheNode: BrancheNode = {\n    text: node.text,\n    type: \"If\",\n    branches: [],\n  };\n\n  if (node.trueNode) {\n    ifBrancheNode.branches.push({ label: \"\", node: node.trueNode });\n  } else {\n    ifBrancheNode.branches.push({ label: \"\", node: null });\n  }\n\n  if (node.falseNode) {\n    ifBrancheNode.branches.push({ label: \"\", node: node.falseNode });\n  } else {\n    ifBrancheNode.branches.push({ label: \"\", node: null });\n  }\n\n  return renderBrancheFragment(ifBrancheNode, options);\n}\n\n// == ノード間の接続線の描画関数群 ===\n\n/**\n * 連結ノード（NodeListNode）の描画\n */\nfunction renderListFragment(\n  node: NodeListNode,\n  options: RenderOptions,\n): ViewFragment {\n  if (options.listRenderType === \"TerminalOffset\") {\n    return renderListFragmentTerminalOffset(node, options);\n  } else {\n    return renderListFragmentOriginal(node, options);\n  }\n}\n\nfunction renderListFragmentOriginal(\n  node: NodeListNode,\n  options: RenderOptions,\n): ViewFragment {\n  let totalHeight = 0;\n  let maxWidth = 0;\n  let currentY = 0;\n  let childrenSvg = \"\";\n  const childFragments: ViewFragment[] = [];\n\n  // 子ノードを再帰的に描画し、サイズとSVGを収集\n  for (const child of node.children) {\n    const childFragment = renderNode(child, options);\n    childFragments.push(childFragment);\n    totalHeight = parseFloat((totalHeight + childFragment.height).toFixed(1));\n    maxWidth = parseFloat(Math.max(maxWidth, childFragment.width).toFixed(1));\n  }\n\n  // 子ノードのSVGを配置し、接続線を描画\n  for (let i = 0; i < childFragments.length; i++) {\n    const childFragment = childFragments[i];\n    // const xOffset = (maxWidth - childFragment.width) / 2; // 中央揃え\n    childrenSvg += renderTransformTranslateSvg(0, currentY, childFragment.svg);\n\n    // 接続線を描画 (最後のノード以外)\n    if (i < childFragments.length - 1) {\n      let startY = 0;\n      let endY = 0;\n      if (childFragment.type === \"Terminal\") {\n        startY = parseFloat((currentY + childFragment.height / 2).toFixed(1));\n      } else {\n        startY = parseFloat(currentY.toFixed(1));\n      }\n      if (childFragments[i + 1].type === \"Terminal\") {\n        endY = parseFloat(\n          (\n            currentY +\n            childFragment.height +\n            options.nodeListSpace +\n            childFragments[i + 1].height / 2\n          ).toFixed(1),\n        );\n      } else {\n        endY = parseFloat(\n          (\n            currentY +\n            childFragment.height +\n            options.nodeListSpace +\n            childFragments[i + 1].height\n          ).toFixed(1),\n        );\n      }\n      childrenSvg += renderLineSvg(0, startY, 0, endY, options);\n      totalHeight = parseFloat(\n        (totalHeight + options.nodeListSpace).toFixed(1),\n      );\n    }\n    currentY = parseFloat(\n      (currentY + childFragment.height + options.nodeListSpace).toFixed(1),\n    );\n  }\n\n  return {\n    svg: childrenSvg,\n    width: maxWidth,\n    height: totalHeight,\n    type: \"NodeList\",\n  };\n}\n\nfunction renderListFragmentTerminalOffset(\n  node: NodeListNode,\n  options: RenderOptions,\n): ViewFragment {\n  let totalHeight = 0;\n  let maxWidth = 0;\n  let offsetX = 0;\n  let topAddWidth = 0;\n  let bottomAddWidth = 0;\n  let currentY = 0;\n  let childrenSvg = \"\";\n  const childFragments: ViewFragment[] = [];\n\n  // 子ノードを再帰的に描画し、サイズとSVGを収集\n  for (const child of node.children) {\n    const childFragment = renderNode(child, options);\n    childFragments.push(childFragment);\n    totalHeight = parseFloat((totalHeight + childFragment.height).toFixed(1));\n    maxWidth = parseFloat(Math.max(maxWidth, childFragment.width).toFixed(1));\n  }\n\n  const topChildFragment = childFragments[0];\n  if (topChildFragment.type === \"Terminal\") {\n    const topWidth = topChildFragment.width;\n    offsetX = parseFloat((topWidth / 2).toFixed(1));\n  }\n  const bottomChildFragment = childFragments[childFragments.length - 1];\n  if (bottomChildFragment.type === \"Terminal\") {\n    const bottomWidth = bottomChildFragment.width;\n    const bottomOffset = parseFloat((bottomWidth / 2).toFixed(1));\n    if (bottomOffset > offsetX) {\n      topAddWidth = parseFloat((bottomOffset - offsetX).toFixed(1));\n      offsetX = bottomOffset;\n    } else {\n      bottomAddWidth = parseFloat((offsetX - bottomOffset).toFixed(1));\n    }\n  }\n\n  // 子ノードのSVGを配置し、接続線を描画\n  for (let i = 0; i < childFragments.length; i++) {\n    const childFragment = childFragments[i];\n    // const xOffset = (maxWidth - childFragment.width) / 2; // 中央揃え\n    if (i === 0) {\n      childrenSvg += renderTransformTranslateSvg(\n        topAddWidth,\n        currentY,\n        childFragment.svg,\n      );\n    } else if (i === childFragments.length - 1) {\n      childrenSvg += renderTransformTranslateSvg(\n        bottomAddWidth,\n        currentY,\n        childFragment.svg,\n      );\n    } else {\n      childrenSvg += renderTransformTranslateSvg(\n        offsetX,\n        currentY,\n        childFragment.svg,\n      );\n    }\n\n    // 接続線を描画 (最後のノード以外)\n    if (i < childFragments.length - 1) {\n      let startY = 0;\n      let endY = 0;\n      if (childFragment.type === \"Terminal\") {\n        if (i === 0) {\n          startY = parseFloat((currentY + childFragment.height).toFixed(1));\n        } else {\n          startY = parseFloat((currentY + childFragment.height / 2).toFixed(1));\n        }\n      } else {\n        startY = parseFloat(currentY.toFixed(1));\n      }\n      if (childFragments[i + 1].type === \"Terminal\") {\n        if (i + 1 === childFragments.length - 1) {\n          endY = parseFloat(\n            (currentY + childFragment.height + options.nodeListSpace).toFixed(\n              1,\n            ),\n          );\n        } else {\n          endY = parseFloat(\n            (\n              currentY +\n              childFragment.height +\n              options.nodeListSpace +\n              childFragments[i + 1].height / 2\n            ).toFixed(1),\n          );\n        }\n      } else {\n        endY = parseFloat(\n          (\n            currentY +\n            childFragment.height +\n            options.nodeListSpace +\n            childFragments[i + 1].height\n          ).toFixed(1),\n        );\n      }\n      childrenSvg += renderLineSvg(offsetX, startY, offsetX, endY, options);\n      totalHeight = parseFloat(\n        (totalHeight + options.nodeListSpace).toFixed(1),\n      );\n    }\n    currentY = parseFloat(\n      (currentY + childFragment.height + options.nodeListSpace).toFixed(1),\n    );\n  }\n\n  return {\n    svg: childrenSvg,\n    width: parseFloat((maxWidth + offsetX).toFixed(1)),\n    height: totalHeight,\n    type: \"NodeList\",\n  };\n}\n\n// == テキスト処理 ==\n\n/**\n * テキストのサイズを概算するヘルパー関数。\n * 全角文字と半角文字を考慮してテキストの幅を計算します。\n */\nfunction measureTextSvg(\n  text: string,\n  options: RenderOptions,\n): { width: number; height: number } {\n  const lines = text.split(\"\\n\");\n\n  const maxWidth = Math.max(\n    ...lines.map((line) => {\n      let width = 0;\n      width = (eaw.length(line) * options.fontSize) / 2;\n      return width;\n    }),\n  );\n\n  const textHeight = lines.length * options.fontSize * options.lineHeight;\n  return { width: maxWidth, height: textHeight };\n}\n\n/**\n * テキストをSVG形式で描画\n */\nfunction renderTextSvg(\n  text: string,\n  posX: number,\n  posY: number,\n  options: RenderOptions,\n): string {\n  const lines = text.split(\"\\n\");\n  let svg = \"\";\n  lines.forEach((line, index) => {\n    const dy = index === 0 ? 0 : index * options.fontSize * options.lineHeight;\n    svg += `<text `;\n    svg += `x=\"${posX.toFixed(1)}\" y=\"${(posY + options.fontSize).toFixed(1)}\" dy=\"${dy.toFixed(1)}\" `;\n    svg += `font-family=\"${options.fontFamily}\" `;\n    svg += `font-size=\"${options.fontSize}\" `;\n    svg += `fill=\"${options.textColor}\">${line}</text>`;\n  });\n  return svg;\n}\n\n// == 描画支援 ==\n\n/**\n * line描画支援\n */\nfunction renderLineSvg(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  options: RenderOptions,\n): string {\n  return `<line\n\t\tx1=\"${x1.toFixed(1)}\" y1=\"${y1.toFixed(1)}\"\n\t\tx2=\"${x2.toFixed(1)}\" y2=\"${y2.toFixed(1)}\"\n\t\tstroke=\"${options.strokeColor}\"\n\t\tstroke-width=\"${options.strokeWidth}\"\n\t/>`;\n}\n\n/**\n * 描画位置オフセット支援\n */\nfunction renderTransformTranslateSvg(\n  x: number,\n  y: number,\n  childSvg: string,\n): string {\n  return `<g transform=\"translate(${x.toFixed(1)}, ${y.toFixed(1)})\">${childSvg}</g>`;\n}\n","var eaw = {};\n\nif ('undefined' === typeof module) {\n  window.eastasianwidth = eaw;\n} else {\n  module.exports = eaw;\n}\n\neaw.eastAsianWidth = function(character) {\n  var x = character.charCodeAt(0);\n  var y = (character.length === 2) ? character.charCodeAt(1) : 0;\n  var codePoint = x;\n  if ((0xD800 <= x && x <= 0xDBFF) && (0xDC00 <= y && y <= 0xDFFF)) {\n    x &= 0x3FF;\n    y &= 0x3FF;\n    codePoint = (x << 10) | y;\n    codePoint += 0x10000;\n  }\n\n  if ((0x3000 === codePoint) ||\n      (0xFF01 <= codePoint && codePoint <= 0xFF60) ||\n      (0xFFE0 <= codePoint && codePoint <= 0xFFE6)) {\n    return 'F';\n  }\n  if ((0x20A9 === codePoint) ||\n      (0xFF61 <= codePoint && codePoint <= 0xFFBE) ||\n      (0xFFC2 <= codePoint && codePoint <= 0xFFC7) ||\n      (0xFFCA <= codePoint && codePoint <= 0xFFCF) ||\n      (0xFFD2 <= codePoint && codePoint <= 0xFFD7) ||\n      (0xFFDA <= codePoint && codePoint <= 0xFFDC) ||\n      (0xFFE8 <= codePoint && codePoint <= 0xFFEE)) {\n    return 'H';\n  }\n  if ((0x1100 <= codePoint && codePoint <= 0x115F) ||\n      (0x11A3 <= codePoint && codePoint <= 0x11A7) ||\n      (0x11FA <= codePoint && codePoint <= 0x11FF) ||\n      (0x2329 <= codePoint && codePoint <= 0x232A) ||\n      (0x2E80 <= codePoint && codePoint <= 0x2E99) ||\n      (0x2E9B <= codePoint && codePoint <= 0x2EF3) ||\n      (0x2F00 <= codePoint && codePoint <= 0x2FD5) ||\n      (0x2FF0 <= codePoint && codePoint <= 0x2FFB) ||\n      (0x3001 <= codePoint && codePoint <= 0x303E) ||\n      (0x3041 <= codePoint && codePoint <= 0x3096) ||\n      (0x3099 <= codePoint && codePoint <= 0x30FF) ||\n      (0x3105 <= codePoint && codePoint <= 0x312D) ||\n      (0x3131 <= codePoint && codePoint <= 0x318E) ||\n      (0x3190 <= codePoint && codePoint <= 0x31BA) ||\n      (0x31C0 <= codePoint && codePoint <= 0x31E3) ||\n      (0x31F0 <= codePoint && codePoint <= 0x321E) ||\n      (0x3220 <= codePoint && codePoint <= 0x3247) ||\n      (0x3250 <= codePoint && codePoint <= 0x32FE) ||\n      (0x3300 <= codePoint && codePoint <= 0x4DBF) ||\n      (0x4E00 <= codePoint && codePoint <= 0xA48C) ||\n      (0xA490 <= codePoint && codePoint <= 0xA4C6) ||\n      (0xA960 <= codePoint && codePoint <= 0xA97C) ||\n      (0xAC00 <= codePoint && codePoint <= 0xD7A3) ||\n      (0xD7B0 <= codePoint && codePoint <= 0xD7C6) ||\n      (0xD7CB <= codePoint && codePoint <= 0xD7FB) ||\n      (0xF900 <= codePoint && codePoint <= 0xFAFF) ||\n      (0xFE10 <= codePoint && codePoint <= 0xFE19) ||\n      (0xFE30 <= codePoint && codePoint <= 0xFE52) ||\n      (0xFE54 <= codePoint && codePoint <= 0xFE66) ||\n      (0xFE68 <= codePoint && codePoint <= 0xFE6B) ||\n      (0x1B000 <= codePoint && codePoint <= 0x1B001) ||\n      (0x1F200 <= codePoint && codePoint <= 0x1F202) ||\n      (0x1F210 <= codePoint && codePoint <= 0x1F23A) ||\n      (0x1F240 <= codePoint && codePoint <= 0x1F248) ||\n      (0x1F250 <= codePoint && codePoint <= 0x1F251) ||\n      (0x20000 <= codePoint && codePoint <= 0x2F73F) ||\n      (0x2B740 <= codePoint && codePoint <= 0x2FFFD) ||\n      (0x30000 <= codePoint && codePoint <= 0x3FFFD)) {\n    return 'W';\n  }\n  if ((0x0020 <= codePoint && codePoint <= 0x007E) ||\n      (0x00A2 <= codePoint && codePoint <= 0x00A3) ||\n      (0x00A5 <= codePoint && codePoint <= 0x00A6) ||\n      (0x00AC === codePoint) ||\n      (0x00AF === codePoint) ||\n      (0x27E6 <= codePoint && codePoint <= 0x27ED) ||\n      (0x2985 <= codePoint && codePoint <= 0x2986)) {\n    return 'Na';\n  }\n  if ((0x00A1 === codePoint) ||\n      (0x00A4 === codePoint) ||\n      (0x00A7 <= codePoint && codePoint <= 0x00A8) ||\n      (0x00AA === codePoint) ||\n      (0x00AD <= codePoint && codePoint <= 0x00AE) ||\n      (0x00B0 <= codePoint && codePoint <= 0x00B4) ||\n      (0x00B6 <= codePoint && codePoint <= 0x00BA) ||\n      (0x00BC <= codePoint && codePoint <= 0x00BF) ||\n      (0x00C6 === codePoint) ||\n      (0x00D0 === codePoint) ||\n      (0x00D7 <= codePoint && codePoint <= 0x00D8) ||\n      (0x00DE <= codePoint && codePoint <= 0x00E1) ||\n      (0x00E6 === codePoint) ||\n      (0x00E8 <= codePoint && codePoint <= 0x00EA) ||\n      (0x00EC <= codePoint && codePoint <= 0x00ED) ||\n      (0x00F0 === codePoint) ||\n      (0x00F2 <= codePoint && codePoint <= 0x00F3) ||\n      (0x00F7 <= codePoint && codePoint <= 0x00FA) ||\n      (0x00FC === codePoint) ||\n      (0x00FE === codePoint) ||\n      (0x0101 === codePoint) ||\n      (0x0111 === codePoint) ||\n      (0x0113 === codePoint) ||\n      (0x011B === codePoint) ||\n      (0x0126 <= codePoint && codePoint <= 0x0127) ||\n      (0x012B === codePoint) ||\n      (0x0131 <= codePoint && codePoint <= 0x0133) ||\n      (0x0138 === codePoint) ||\n      (0x013F <= codePoint && codePoint <= 0x0142) ||\n      (0x0144 === codePoint) ||\n      (0x0148 <= codePoint && codePoint <= 0x014B) ||\n      (0x014D === codePoint) ||\n      (0x0152 <= codePoint && codePoint <= 0x0153) ||\n      (0x0166 <= codePoint && codePoint <= 0x0167) ||\n      (0x016B === codePoint) ||\n      (0x01CE === codePoint) ||\n      (0x01D0 === codePoint) ||\n      (0x01D2 === codePoint) ||\n      (0x01D4 === codePoint) ||\n      (0x01D6 === codePoint) ||\n      (0x01D8 === codePoint) ||\n      (0x01DA === codePoint) ||\n      (0x01DC === codePoint) ||\n      (0x0251 === codePoint) ||\n      (0x0261 === codePoint) ||\n      (0x02C4 === codePoint) ||\n      (0x02C7 === codePoint) ||\n      (0x02C9 <= codePoint && codePoint <= 0x02CB) ||\n      (0x02CD === codePoint) ||\n      (0x02D0 === codePoint) ||\n      (0x02D8 <= codePoint && codePoint <= 0x02DB) ||\n      (0x02DD === codePoint) ||\n      (0x02DF === codePoint) ||\n      (0x0300 <= codePoint && codePoint <= 0x036F) ||\n      (0x0391 <= codePoint && codePoint <= 0x03A1) ||\n      (0x03A3 <= codePoint && codePoint <= 0x03A9) ||\n      (0x03B1 <= codePoint && codePoint <= 0x03C1) ||\n      (0x03C3 <= codePoint && codePoint <= 0x03C9) ||\n      (0x0401 === codePoint) ||\n      (0x0410 <= codePoint && codePoint <= 0x044F) ||\n      (0x0451 === codePoint) ||\n      (0x2010 === codePoint) ||\n      (0x2013 <= codePoint && codePoint <= 0x2016) ||\n      (0x2018 <= codePoint && codePoint <= 0x2019) ||\n      (0x201C <= codePoint && codePoint <= 0x201D) ||\n      (0x2020 <= codePoint && codePoint <= 0x2022) ||\n      (0x2024 <= codePoint && codePoint <= 0x2027) ||\n      (0x2030 === codePoint) ||\n      (0x2032 <= codePoint && codePoint <= 0x2033) ||\n      (0x2035 === codePoint) ||\n      (0x203B === codePoint) ||\n      (0x203E === codePoint) ||\n      (0x2074 === codePoint) ||\n      (0x207F === codePoint) ||\n      (0x2081 <= codePoint && codePoint <= 0x2084) ||\n      (0x20AC === codePoint) ||\n      (0x2103 === codePoint) ||\n      (0x2105 === codePoint) ||\n      (0x2109 === codePoint) ||\n      (0x2113 === codePoint) ||\n      (0x2116 === codePoint) ||\n      (0x2121 <= codePoint && codePoint <= 0x2122) ||\n      (0x2126 === codePoint) ||\n      (0x212B === codePoint) ||\n      (0x2153 <= codePoint && codePoint <= 0x2154) ||\n      (0x215B <= codePoint && codePoint <= 0x215E) ||\n      (0x2160 <= codePoint && codePoint <= 0x216B) ||\n      (0x2170 <= codePoint && codePoint <= 0x2179) ||\n      (0x2189 === codePoint) ||\n      (0x2190 <= codePoint && codePoint <= 0x2199) ||\n      (0x21B8 <= codePoint && codePoint <= 0x21B9) ||\n      (0x21D2 === codePoint) ||\n      (0x21D4 === codePoint) ||\n      (0x21E7 === codePoint) ||\n      (0x2200 === codePoint) ||\n      (0x2202 <= codePoint && codePoint <= 0x2203) ||\n      (0x2207 <= codePoint && codePoint <= 0x2208) ||\n      (0x220B === codePoint) ||\n      (0x220F === codePoint) ||\n      (0x2211 === codePoint) ||\n      (0x2215 === codePoint) ||\n      (0x221A === codePoint) ||\n      (0x221D <= codePoint && codePoint <= 0x2220) ||\n      (0x2223 === codePoint) ||\n      (0x2225 === codePoint) ||\n      (0x2227 <= codePoint && codePoint <= 0x222C) ||\n      (0x222E === codePoint) ||\n      (0x2234 <= codePoint && codePoint <= 0x2237) ||\n      (0x223C <= codePoint && codePoint <= 0x223D) ||\n      (0x2248 === codePoint) ||\n      (0x224C === codePoint) ||\n      (0x2252 === codePoint) ||\n      (0x2260 <= codePoint && codePoint <= 0x2261) ||\n      (0x2264 <= codePoint && codePoint <= 0x2267) ||\n      (0x226A <= codePoint && codePoint <= 0x226B) ||\n      (0x226E <= codePoint && codePoint <= 0x226F) ||\n      (0x2282 <= codePoint && codePoint <= 0x2283) ||\n      (0x2286 <= codePoint && codePoint <= 0x2287) ||\n      (0x2295 === codePoint) ||\n      (0x2299 === codePoint) ||\n      (0x22A5 === codePoint) ||\n      (0x22BF === codePoint) ||\n      (0x2312 === codePoint) ||\n      (0x2460 <= codePoint && codePoint <= 0x24E9) ||\n      (0x24EB <= codePoint && codePoint <= 0x254B) ||\n      (0x2550 <= codePoint && codePoint <= 0x2573) ||\n      (0x2580 <= codePoint && codePoint <= 0x258F) ||\n      (0x2592 <= codePoint && codePoint <= 0x2595) ||\n      (0x25A0 <= codePoint && codePoint <= 0x25A1) ||\n      (0x25A3 <= codePoint && codePoint <= 0x25A9) ||\n      (0x25B2 <= codePoint && codePoint <= 0x25B3) ||\n      (0x25B6 <= codePoint && codePoint <= 0x25B7) ||\n      (0x25BC <= codePoint && codePoint <= 0x25BD) ||\n      (0x25C0 <= codePoint && codePoint <= 0x25C1) ||\n      (0x25C6 <= codePoint && codePoint <= 0x25C8) ||\n      (0x25CB === codePoint) ||\n      (0x25CE <= codePoint && codePoint <= 0x25D1) ||\n      (0x25E2 <= codePoint && codePoint <= 0x25E5) ||\n      (0x25EF === codePoint) ||\n      (0x2605 <= codePoint && codePoint <= 0x2606) ||\n      (0x2609 === codePoint) ||\n      (0x260E <= codePoint && codePoint <= 0x260F) ||\n      (0x2614 <= codePoint && codePoint <= 0x2615) ||\n      (0x261C === codePoint) ||\n      (0x261E === codePoint) ||\n      (0x2640 === codePoint) ||\n      (0x2642 === codePoint) ||\n      (0x2660 <= codePoint && codePoint <= 0x2661) ||\n      (0x2663 <= codePoint && codePoint <= 0x2665) ||\n      (0x2667 <= codePoint && codePoint <= 0x266A) ||\n      (0x266C <= codePoint && codePoint <= 0x266D) ||\n      (0x266F === codePoint) ||\n      (0x269E <= codePoint && codePoint <= 0x269F) ||\n      (0x26BE <= codePoint && codePoint <= 0x26BF) ||\n      (0x26C4 <= codePoint && codePoint <= 0x26CD) ||\n      (0x26CF <= codePoint && codePoint <= 0x26E1) ||\n      (0x26E3 === codePoint) ||\n      (0x26E8 <= codePoint && codePoint <= 0x26FF) ||\n      (0x273D === codePoint) ||\n      (0x2757 === codePoint) ||\n      (0x2776 <= codePoint && codePoint <= 0x277F) ||\n      (0x2B55 <= codePoint && codePoint <= 0x2B59) ||\n      (0x3248 <= codePoint && codePoint <= 0x324F) ||\n      (0xE000 <= codePoint && codePoint <= 0xF8FF) ||\n      (0xFE00 <= codePoint && codePoint <= 0xFE0F) ||\n      (0xFFFD === codePoint) ||\n      (0x1F100 <= codePoint && codePoint <= 0x1F10A) ||\n      (0x1F110 <= codePoint && codePoint <= 0x1F12D) ||\n      (0x1F130 <= codePoint && codePoint <= 0x1F169) ||\n      (0x1F170 <= codePoint && codePoint <= 0x1F19A) ||\n      (0xE0100 <= codePoint && codePoint <= 0xE01EF) ||\n      (0xF0000 <= codePoint && codePoint <= 0xFFFFD) ||\n      (0x100000 <= codePoint && codePoint <= 0x10FFFD)) {\n    return 'A';\n  }\n\n  return 'N';\n};\n\neaw.characterLength = function(character) {\n  var code = this.eastAsianWidth(character);\n  if (code === 'F' || code === 'W' || code === 'A') {\n    return 2;\n  } else {\n    return 1;\n  }\n};\n\n// Split a string considering surrogate-pairs.\nfunction stringToArray(string) {\n  return string.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[^\\uD800-\\uDFFF]/g) || [];\n}\n\neaw.length = function(string) {\n  var characters = stringToArray(string);\n  var len = 0;\n  for (var i = 0; i < characters.length; i++) {\n    len = len + this.characterLength(characters[i]);\n  }\n  return len;\n};\n\neaw.slice = function(text, start, end) {\n  var textLen = eaw.length(text)\n  start = start === undefined || start === null ? 0 : start;\n  end = end === undefined || start === null ? 1 : end;\n  if (start < 0) {\n      start = textLen + start;\n  }\n  if (end < 0) {\n      end = textLen + end;\n  }\n  var result = '';\n  var eawLen = 0;\n  var chars = stringToArray(text);\n  for (var i = 0; i < chars.length; i++) {\n    var char = chars[i];\n    var charLen = eaw.length(char);\n    if (eawLen >= start - (charLen === 2 ? 1 : 0)) {\n        if (eawLen + charLen <= end) {\n            result += char;\n        } else {\n            break;\n        }\n    }\n    eawLen += charLen;\n  }\n  return result;\n};\n"],"names":["$30ca700923f7cd7e$export$f9c837a54db411d","Error","message","name","$30ca700923f7cd7e$export$eaf10ed6e5991cf8","$30ca700923f7cd7e$export$1d21b533e0dc3eed","$30ca700923f7cd7e$export$d0be8b16a0056b4a","$30ca700923f7cd7e$export$1e06c21ce32643dc","$30ca700923f7cd7e$export$91a4fa3e8e7c8586","$30ca700923f7cd7e$export$773fc764960da4ba","$30ca700923f7cd7e$export$a235ab136f3fda43","$30ca700923f7cd7e$export$ecfc75b1ea638281","$30ca700923f7cd7e$var$Context","parent","depth","nodeList","optionStatus","optionArg","$30ca700923f7cd7e$var$patternComment","$30ca700923f7cd7e$var$DummyParseErrorReceiver","$30ca700923f7cd7e$var$handleBody","context","body","length","lnode","type","node","cases","set","startsWith","parts","split","cmd","substring","arg","trim","push","text","childNode","isWhile","trueNode","falseNode","Map","lastIfNode","lastSwitchNode","has","$30ca700923f7cd7e$var$upToParent","newNode","children","i","pnode","processNode","snode","ifnode","$c197fae6480f2e77$exports","$c197fae6480f2e77$var$eaw","$c197fae6480f2e77$var$stringToArray","string","match","eastAsianWidth","character","x","charCodeAt","y","codePoint","characterLength","code","characters","len","slice","start","end","textLen","undefined","result","eawLen","chars","char","charLen","$6b098df580cc3f14$var$defaultRenderOptions","fontSize","fontFamily","margin","top","right","bottom","left","boxPadding","branchePadding","strokeWidth","strokeColor","backgroundColor","baseBackgroundColor","textColor","lineHeight","doubleLineWidth","switchNodeCaseWidth","connectorWidth","nodeListSpace","childNodeOffsetWidth","listRenderType","$6b098df580cc3f14$var$renderNode","options","$6b098df580cc3f14$var$renderBoxFragment","borderType","drawLeftBar","drawRightBar","$6b098df580cc3f14$var$renderListFragmentTerminalOffset","totalHeight","maxWidth","offsetX","topAddWidth","bottomAddWidth","currentY","childrenSvg","childFragments","child","childFragment","parseFloat","height","toFixed","Math","max","width","topChildFragment","topWidth","bottomChildFragment","bottomOffset","bottomWidth","$6b098df580cc3f14$var$renderTransformTranslateSvg","svg","startY","$6b098df580cc3f14$var$renderLineSvg","$6b098df580cc3f14$var$renderListFragmentOriginal","ifBrancheNode","branches","label","$6b098df580cc3f14$var$renderBrancheFragment","switchBrancheNode","caseNode","entries","toString","textMetrics","$6b098df580cc3f14$var$measureTextSvg","contentWidth","contentHeight","textOffsetX","textOffsetY","fillColor","radius","$6b098df580cc3f14$var$renderTextSvg","$6b098df580cc3f14$var$measureTextSvgForBranche","$6b098df580cc3f14$var$renderTextSvgForBranche","posX","posY","conditionSize","minHeight","labelw","subvieww","h","count","lastdy","lastldy","brancheFragments","ymap","index","branche","uply","bottomly","labelSize","brancheFragment","subViewSize","fragment","minldy","first","addChildLineWidth","poly","lasty","boxRight","ly","lh_temp","get","polyPoints","map","p","join","ls","lines","line","forEach","dy","x1","y1","x2","y2","childSvg","document","addEventListener","spdInput","getElementById","svgOutput","fileInput","downloadButton","downloadSvgButton","fontSizeInput","baseBackgroundColorInput","transparentBackgroundCheckbox","backgroundColorInput","transparentNodeBackgroundCheckbox","textColorInput","listRenderTypeTerminalOffset","applyOptionsButton","convertAndRender","spdText","value","ast","src","exr","rootContext","lineNo","test","tabNum","charAt","parentNode","newContext","endsWith","multiLineContent","nextLine","nextLineTabNum","nextLineBody","replace","ex","console","error","parseInt","checked","innerHTML","mergedOptions","svgWidth","svgHeight","baseFillColor","disabled","event","key","preventDefault","selectionStart","selectionEnd","file","target","files","reader","FileReader","onload","e","readAsText","fileName","prompt","blob","Blob","url","URL","createObjectURL","a","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","svgString","alert"],"version":3,"file":"web.e788ba1a.js.map"}